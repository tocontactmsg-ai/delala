<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ุงูุฏูุงูุฉ | ุณูู ุฅููุชุฑููู ููุจูุน ูุงูุดุฑุงุก ูู ุงูุณูุฏุงู</title>
<link rel="icon" type="image/png" href="/favicon.ico">

<!-- Font Awesome Icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-VFM8VZCQY6');
</script>

<!-- SEO Meta Tags -->
<meta name="description" content="ุงูุฏูุงูุฉ โ ูุนุฑุถ ูุณูู ูุชููุฒ ููุดุฑ ููุชุงุจุนุฉ ุงูุฅุนูุงูุงุช ุงููุจูุจุฉ ุจุณูููุฉ ููุณุฑ ูู ุงูุณูุฏุงู . ุงูุดุฑ ุฅุนูุงูู ุจุณูููุฉ ูุชูุงุตู ูุน ุงููุดุชุฑูู ูู ููุทูุชู ูุจุงุดุฑุฉ , ูุชุนุฉ ูุณูููุฉ ูู ุงูุนุฑุถ ูุงูุทูุจ ,ููุท ุนุจุฑ ุงููุงุชุณุงุจ ููููู ุชูุฏูู ุทูุจ ุงุนูุงู ูุงุฐุง ุชูุช ุงูููุงููุฉ ุณูุนุฑุถ ุงุนูุงูู ุนูู ุงูููุงููู ูู ุงูุฒูุงุฑ." />
<link rel="canonical" href="https://eldelala.com/" />
<link rel="icon" type="image/png" href="/favicon.ico">

<meta property="og:type" content="website" />
<meta property="og:title" content="ุงูุฏูุงูุฉ โ ุงุนูู ุจุจุณุงุทุฉ ูุณูููุฉ" />
<meta property="og:description" content="ุณูู ุฅููุชุฑููู ููุจูุน ูุงูุดุฑุงุก ุฏุงุฎู ุงูุณูุฏุงู โ ุงูุฏูุงูุฉ" />
<meta property="og:url" content="https://eldelala.com/" />
<meta property="og:image" content="https://eldelala.com/logo-1200x630.png" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="ุงูุฏูุงูุฉ โ ุณูู ุฅููุชุฑููู ููุจูุน ูุงูุดุฑุงุก ุฏุงุฎู ุงูุณูุฏุงู โ ุงูุฏูุงูุฉ" />
<meta name="twitter:description" content="ุณูู ุฅููุชุฑููู ููุจูุน ูุงูุดุฑุงุก ุฏุงุฎู ุงูุณูุฏุงู โ ุงูุฏูุงูุฉ" />
<meta name="twitter:image" content="https://eldelala.com/logo-800x418.png" />

<!-- Structured Data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": ["WebSite", "Organization"],
  "name": "ุงูุฏูุงูุฉ",
  "url": "https://eldelala.com/",
  "logo": "https://eldelala.com/logo.png",
  "contactPoint": {
    "@type": "ContactPoint",
    "telephone": "+249-9986-15193",
    "contactType": "customer support",
    "email": "info@eldelala.com"
  },
  "potentialAction": {
    "@type": "SearchAction",
    "target": "https://eldelala.com/?q={search_term_string}",
    "query-input": "required name=search_term_string"
  }
}
</script>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
<meta http-equiv="Pragma" content="no-cache" />
<meta http-equiv="Expires" content="0" />

<!-- Google Fonts -->
<link rel="preload" href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700&display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@300;400;500;600;700&display=swap" rel="stylesheet"></noscript>

<style>
  /* ========================================================== */
  /* ๐จ CSS VARIABLES & GLOBAL STYLES */
  /* ========================================================== */
  :root {
    --primary-color: #0078d7;
    --primary-dark: #0056a3;
    --secondary-color: #047857;
    --danger-color: #dc2626;
    --warning-color: #f59e0b;
    --light-color: #f8fafc;
    --dark-color: #0f172a;
    --text-color: #334155;
    --text-light: #64748b;
    --border-color: #e2e8f0;
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.08);
    --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.12);
    --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.16);
    --radius-sm: 8px;
    --radius-md: 12px;
    --radius-lg: 16px;
    --transition: all 0.3s ease;
  }
  
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  
  body {
    font-family: 'Tajawal', sans-serif;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
    color: var(--text-color);
    line-height: 1.6;
    min-height: 100vh;
    direction: rtl;
  }
  
  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  /* ========================================================== */
  /* ๐ฏ HEADER & NAVIGATION */
  /* ========================================================== */
  header {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 20px 0;
    border-radius: 0 0 var(--radius-lg) var(--radius-lg);
    box-shadow: var(--shadow-md);
    margin-bottom: 30px;
    position: relative;
    overflow: hidden;
  }
  
  header::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 300px;
    height: 300px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    transform: translate(30%, -30%);
  }
  
  .brand {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
    gap: 20px;
    position: relative;
    z-index: 1;
  }
  
  .brand .title {
    font-size: 28px;
    font-weight: 800;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .brand .title i {
    font-size: 32px;
    color: #ffcc00;
  }
  
  nav[aria-label="ูุงุฌูุฉ"] {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  
  .nav-btn {
    background: rgba(255, 255, 255, 0.15);
    color: white;
    border: 1px solid rgba(255, 255, 255, 0.3);
    padding: 10px 20px;
    border-radius: 50px;
    cursor: pointer;
    font-size: 14px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: var(--transition);
  }
  
  .nav-btn:hover {
    background: rgba(255, 255, 255, 0.25);
    transform: translateY(-2px);
  }
  
  .nav-btn[aria-current="true"] {
    background: white;
    color: var(--primary-color);
    border-color: white;
    box-shadow: var(--shadow-sm);
  }
  
  /* ========================================================== */
  /* ๐ CONTROLS & FILTERS */
  /* ========================================================== */
  .controls {
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    margin: 20px 0 30px;
    align-items: center;
    background: white;
    padding: 20px;
    border-radius: var(--radius-md);
    box-shadow: var(--shadow-sm);
  }
  
  input, textarea, select {
    padding: 12px 15px;
    border-radius: var(--radius-sm);
    border: 2px solid var(--border-color);
    width: 100%;
    font-size: 15px;
    font-family: 'Tajawal', sans-serif;
    transition: var(--transition);
    background: white;
  }
  
  input:focus, textarea:focus, select:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(0, 120, 215, 0.1);
  }
  
  textarea {
    min-height: 120px;
    resize: vertical;
    line-height: 1.5;
  }
  
  /* ========================================================== */
  /* ๐จ BUTTONS */
  /* ========================================================== */
  .btn {
    background: var(--primary-color);
    color: white;
    padding: 12px 24px;
    border-radius: var(--radius-sm);
    border: none;
    cursor: pointer;
    font-size: 15px;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
    transition: var(--transition);
    text-decoration: none;
  }
  
  .btn:hover {
    background: var(--primary-dark);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
  }
  
  .btn:active {
    transform: translateY(0);
  }
  
  .btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none !important;
    box-shadow: none !important;
  }
  
  .btn-success {
    background: var(--secondary-color);
  }
  
  .btn-success:hover {
    background: #065f46;
  }
  
  .btn-danger {
    background: var(--danger-color);
  }
  
  .btn-danger:hover {
    background: #b91c1c;
  }
  
  .btn-warning {
    background: var(--warning-color);
    color: #000;
  }
  
  .btn-warning:hover {
    background: #d97706;
  }
  
  .btn-light {
    background: var(--light-color);
    color: var(--text-color);
    border: 1px solid var(--border-color);
  }
  
  .btn-light:hover {
    background: #e2e8f0;
  }
  
  .btn-small {
    padding: 8px 16px;
    font-size: 13px;
  }
  
  /* ========================================================== */
  /* ๐ GRID & CARDS */
  /* ========================================================== */
  .grid {
    display: grid;
    grid-template-columns: repeat(1, 1fr);
    gap: 25px;
    margin: 20px 0;
  }
  
  @media (min-width: 640px) { .grid { grid-template-columns: repeat(2, 1fr); } }
  @media (min-width: 1024px) { .grid { grid-template-columns: repeat(3, 1fr); } }
  
  .card {
    background: white;
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
    display: flex;
    flex-direction: column;
    transition: var(--transition);
    border: 1px solid var(--border-color);
    position: relative;
  }
  
  .card:hover {
    transform: translateY(-5px);
    box-shadow: var(--shadow-lg);
  }
  
  .media {
    height: 220px;
    background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    overflow: hidden;
  }
  
  .media img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    transition: transform 0.5s ease;
  }
  
  .card:hover .media img {
    transform: scale(1.05);
  }
  
  .no-image {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--text-light);
    gap: 10px;
  }
  
  .no-image i {
    font-size: 48px;
    opacity: 0.5;
  }
  
  .body {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    flex: 1;
  }
  
  .title {
    font-weight: 700;
    font-size: 18px;
    color: var(--dark-color);
    line-height: 1.4;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .desc {
    font-size: 14px;
    color: var(--text-light);
    line-height: 1.6;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    flex: 1;
  }
  
  .meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 13px;
    color: var(--text-light);
    margin-top: 10px;
    padding-top: 10px;
    border-top: 1px solid var(--border-color);
  }
  
  .badge {
    background: linear-gradient(135deg, #dbeafe 0%, #eff6ff 100%);
    color: var(--primary-color);
    padding: 6px 12px;
    border-radius: 50px;
    font-size: 12px;
    font-weight: 600;
    display: inline-flex;
    align-items: center;
    gap: 5px;
    border: 1px solid #bfdbfe;
  }
  
  .price {
    font-weight: 800;
    color: var(--secondary-color);
    font-size: 16px;
  }
  
  .ref-code {
    font-family: 'Courier New', monospace;
    font-size: 13px;
    color: var(--text-light);
    background: #f8fafc;
    padding: 4px 8px;
    border-radius: 4px;
    border: 1px solid #e2e8f0;
  }
  
  /* ========================================================== */
  /* ๐ฌ AD ACTIONS (WhatsApp, Call, Share) */
  /* ========================================================== */
  .card-actions {
    display: flex;
    gap: 8px;
    padding: 15px 20px;
    border-top: 1px solid var(--border-color);
    background: #f8fafc;
  }
  
  .card-actions .btn {
    flex: 1;
    padding: 10px;
    font-size: 13px;
  }
  
  .card-actions .btn i {
    font-size: 14px;
  }
  
  /* ========================================================== */
  /* ๐ช TICKER TAPE */
  /* ========================================================== */
  #tickerTape {
    background: linear-gradient(135deg, #fff7ed 0%, #fffbeb 100%);
    border: 2px solid #fbbf24;
    padding: 12px 20px;
    border-radius: var(--radius-md);
    overflow: hidden;
    margin: 20px 0;
    display: none;
    position: relative;
  }
  
  #tickerTape.has-messages {
    display: block;
  }
  
  .ticker-content {
    display: flex;
    white-space: nowrap;
    animation: marquee-rtl 30s linear infinite;
  }
  
  .ticker-content:hover {
    animation-play-state: paused;
  }
  
  .ticker-item {
    font-size: 14px;
    color: #92400e;
    padding-left: 60px;
    font-weight: 500;
    display: inline-flex;
    align-items: center;
    gap: 8px;
  }
  
  .ticker-item i {
    color: #f59e0b;
  }
  
  @keyframes marquee-rtl {
    0% { transform: translateX(100%); }
    100% { transform: translateX(-100%); }
  }
  
  /* ========================================================== */
  /* ๐ก MESSAGE SYSTEM */
  /* ========================================================== */
  #msges-container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto 20px auto;
    padding: 0 20px;
    display: none;
  }
  
  .msges-box {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 16px 20px;
    border-radius: var(--radius-md);
    margin-bottom: 12px;
    font-size: 14px;
    line-height: 1.5;
    animation: slideIn 0.3s ease;
    box-shadow: var(--shadow-sm);
  }
  
  @keyframes slideIn {
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .msges-box.success {
    background: linear-gradient(135deg, #d1fae5 0%, #a7f3d0 100%);
    color: #065f46;
    border-right: 4px solid var(--secondary-color);
  }
  
  .msges-box.error {
    background: linear-gradient(135deg, #fee2e2 0%, #fecaca 100%);
    color: var(--danger-color);
    border-right: 4px solid var(--danger-color);
  }
  
  .msges-box.warning {
    background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
    color: #92400e;
    border-right: 4px solid var(--warning-color);
  }
  
  .msges-box.info {
    background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);
    color: var(--primary-color);
    border-right: 4px solid var(--primary-color);
  }
  
  .close-btn {
    background: none;
    border: none;
    cursor: pointer;
    font-size: 18px;
    font-weight: bold;
    color: inherit;
    opacity: 0.7;
    transition: var(--transition);
    padding: 0 8px;
  }
  
  .close-btn:hover {
    opacity: 1;
  }
  
  /* ========================================================== */
  /* ๐ฑ SECTIONS */
  /* ========================================================== */
  main > section {
    display: none;
    animation: fadeIn 0.5s ease;
  }
  
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  main > section.active {
    display: block;
  }
  
  .panel {
    background: white;
    border-radius: var(--radius-lg);
    padding: 30px;
    box-shadow: var(--shadow-md);
    margin-top: 20px;
  }
  
  .panel h2 {
    color: var(--dark-color);
    margin-bottom: 25px;
    font-size: 24px;
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .panel h2 i {
    color: var(--primary-color);
  }
  
  .panel h3 {
    color: var(--dark-color);
    margin-bottom: 20px;
    font-size: 20px;
  }
  
  /* ========================================================== */
  /* ๐ FORM STYLES */
  /* ========================================================== */
  .form-group {
    margin-bottom: 20px;
  }
  
  .form-group label {
    display: block;
    margin-bottom: 8px;
    font-weight: 600;
    color: var(--text-color);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  
  .form-group label i {
    color: var(--primary-color);
    width: 20px;
  }
  
  .required::after {
    content: " *";
    color: var(--danger-color);
  }
  
  .checkbox-group {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 25px 0;
  }
  
  .checkbox-group input[type="checkbox"] {
    width: auto;
    transform: scale(1.2);
  }
  
  .checkbox-group label {
    margin: 0;
    font-weight: normal;
    cursor: pointer;
  }
  
  .form-grid {
    display: grid;
    grid-template-columns: repeat(1, 1fr);
    gap: 20px;
  }
  
  @media (min-width: 768px) {
    .form-grid {
      grid-template-columns: repeat(2, 1fr);
    }
  }
  
  .submit-area {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-top: 30px;
    padding-top: 20px;
    border-top: 2px solid var(--border-color);
  }
  
  .file-input-container {
    position: relative;
    overflow: hidden;
    border: 2px dashed var(--border-color);
    border-radius: var(--radius-md);
    padding: 40px 20px;
    text-align: center;
    transition: var(--transition);
    cursor: pointer;
  }
  
  .file-input-container:hover {
    border-color: var(--primary-color);
    background: rgba(0, 120, 215, 0.03);
  }
  
  .file-input-container input[type="file"] {
    position: absolute;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    cursor: pointer;
  }
  
  .file-input-label {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    color: var(--text-light);
  }
  
  .file-input-label i {
    font-size: 48px;
    color: var(--primary-color);
  }
  
  .file-preview {
    display: none;
    margin-top: 15px;
    text-align: center;
  }
  
  .file-preview img {
    max-width: 200px;
    max-height: 150px;
    border-radius: var(--radius-sm);
    box-shadow: var(--shadow-sm);
  }
  
  .file-info {
    margin-top: 10px;
    font-size: 13px;
    color: var(--text-light);
  }
  
  /* ========================================================== */
  /* ๐ช MODAL STYLES */
  /* ========================================================== */
  .modal {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.7);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    padding: 20px;
    backdrop-filter: blur(4px);
    animation: modalFadeIn 0.3s ease;
  }
  
  @keyframes modalFadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  
  .modal[aria-hidden="false"] {
    display: flex;
  }
  
  .modalCard {
    background: white;
    border-radius: var(--radius-lg);
    max-width: 900px;
    width: 100%;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: var(--shadow-lg);
    display: flex;
    flex-direction: column;
    animation: modalSlideUp 0.3s ease;
  }
  
  @keyframes modalSlideUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .modalHeader {
    padding: 20px 25px;
    border-bottom: 1px solid var(--border-color);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 20px;
    flex-wrap: wrap;
    background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
  }
  
  .modalHeader h2 {
    font-size: 22px;
    color: var(--dark-color);
    display: flex;
    align-items: center;
    gap: 10px;
  }
  
  .modalHeader h2 i {
    color: var(--primary-color);
  }
  
  .modalRef {
    font-family: 'Courier New', monospace;
    font-size: 14px;
    color: var(--text-light);
    background: white;
    padding: 6px 12px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border-color);
  }
  
  .modalMain {
    display: grid;
    grid-template-columns: 1.2fr 1fr;
    gap: 30px;
    padding: 25px;
    max-height: calc(90vh - 140px);
    overflow-y: auto;
  }
  
  @media (max-width: 768px) {
    .modalMain {
      grid-template-columns: 1fr;
      gap: 20px;
    }
  }
  
  .modalImage {
    background: #f8fafc;
    border-radius: var(--radius-md);
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    min-height: 300px;
    position: relative;
  }
  
  .modalImage img {
    max-width: 100%;
    max-height: 400px;
    width: auto;
    height: auto;
    object-fit: contain;
  }
  
  .modalContent {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  
  .modalDescription {
    white-space: pre-wrap;
    font-size: 15px;
    color: var(--text-color);
    line-height: 1.8;
    padding: 20px;
    background: #f8fafc;
    border-radius: var(--radius-md);
    border: 1px solid var(--border-color);
  }
  
  .detailsGrid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
  }
  
  @media (max-width: 480px) {
    .detailsGrid {
      grid-template-columns: 1fr;
    }
  }
  
  .detailItem {
    background: #f8fafc;
    border-radius: var(--radius-sm);
    padding: 15px;
    border: 1px solid var(--border-color);
  }
  
  .detailItem strong {
    display: block;
    font-size: 12px;
    color: var(--text-light);
    margin-bottom: 8px;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  .detailItem strong i {
    color: var(--primary-color);
  }
  
  .detailValue {
    font-size: 14px;
    color: var(--text-color);
    font-weight: 500;
  }
  
  .modalActions {
    padding: 20px 25px;
    border-top: 1px solid var(--border-color);
    background: #f8fafc;
    display: flex;
    gap: 15px;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
  }
  
  .modalActions .btn {
    flex: 1;
    min-width: 140px;
  }
  
  .action-group {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
  }
  
  .note {
    font-size: 12px;
    color: var(--text-light);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  .note i {
    color: var(--warning-color);
  }
  
  /* ========================================================== */
  /* ๐ฆด SKELETON LOADING */
  /* ========================================================== */
  .skeleton {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: loading 1.5s infinite;
    border-radius: 4px;
  }
  
  @keyframes loading {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }
  
  .skeleton-card {
    background: white;
    border-radius: var(--radius-md);
    overflow: hidden;
    box-shadow: var(--shadow-sm);
  }
  
  .skeleton-media {
    height: 220px;
    background: #f0f4f8;
  }
  
  .skeleton-body {
    padding: 20px;
  }
  
  .skeleton-title {
    height: 24px;
    width: 70%;
    margin-bottom: 15px;
  }
  
  .skeleton-desc {
    height: 16px;
    width: 90%;
    margin-bottom: 10px;
  }
  
  .skeleton-desc-short {
    height: 16px;
    width: 60%;
    margin-bottom: 20px;
  }
  
  .skeleton-meta {
    display: flex;
    justify-content: space-between;
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid var(--border-color);
  }
  
  .skeleton-badge {
    height: 24px;
    width: 80px;
    border-radius: 50px;
  }
  
  .skeleton-price {
    height: 24px;
    width: 100px;
  }
  
  /* ========================================================== */
  /* ๐ CALL TO ACTION SECTION */
  /* ========================================================== */
  .cta-section {
    background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
    color: white;
    padding: 40px;
    border-radius: var(--radius-lg);
    text-align: center;
    margin: 40px 0;
    box-shadow: var(--shadow-md);
  }
  
  .cta-section h2 {
    font-size: 28px;
    margin-bottom: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 15px;
  }
  
  .cta-section p {
    font-size: 16px;
    margin-bottom: 25px;
    opacity: 0.9;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }
  
  /* ========================================================== */
  /* ๐ฆถ FOOTER */
  /* ========================================================== */
  footer {
    text-align: center;
    padding: 30px 0;
    margin-top: 50px;
    color: var(--text-light);
    font-size: 13px;
    border-top: 1px solid var(--border-color);
  }
  
  footer .container {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  
  .footer-links {
    display: flex;
    justify-content: center;
    gap: 25px;
    flex-wrap: wrap;
  }
  
  .footer-links a {
    color: var(--text-light);
    text-decoration: none;
    transition: var(--transition);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  
  .footer-links a:hover {
    color: var(--primary-color);
  }
  
  /* ========================================================== */
  /* ๐ฑ RESPONSIVE DESIGN */
  /* ========================================================== */
  @media (max-width: 768px) {
    .container {
      padding: 0 15px;
    }
    
    .brand {
      flex-direction: column;
      text-align: center;
    }
    
    nav[aria-label="ูุงุฌูุฉ"] {
      justify-content: center;
    }
    
    .controls {
      flex-direction: column;
    }
    
    .controls > div {
      width: 100%;
    }
    
    .panel {
      padding: 20px;
    }
    
    .modalMain {
      padding: 15px;
    }
    
    .modalHeader, .modalActions {
      padding: 15px;
    }
    
    .cta-section {
      padding: 30px 20px;
    }
    
    .cta-section h2 {
      font-size: 22px;
    }
  }
  
  @media (max-width: 480px) {
    .nav-btn {
      padding: 8px 16px;
      font-size: 13px;
    }
    
    .btn {
      padding: 10px 16px;
      font-size: 14px;
    }
    
    .card-actions {
      flex-direction: column;
    }
    
    .action-group {
      flex-direction: column;
      width: 100%;
    }
    
    .modalActions .btn {
      min-width: 100%;
    }
  }
  
  /* ========================================================== */
  /* ๐ญ UTILITY CLASSES */
  /* ========================================================== */
  .hidden {
    display: none !important;
  }
  
  .text-center {
    text-align: center;
  }
  
  .text-right {
    text-align: right;
  }
  
  .mb-20 {
    margin-bottom: 20px;
  }
  
  .mt-20 {
    margin-top: 20px;
  }
  
  .flex {
    display: flex;
  }
  
  .flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  .space-between {
    justify-content: space-between;
  }
  
  .align-center {
    align-items: center;
  }
  
  .gap-10 {
    gap: 10px;
  }
  
  .gap-15 {
    gap: 15px;
  }
  
  .gap-20 {
    gap: 20px;
  }
  
  .full-width {
    width: 100%;
  }
</style>
</head>
<body>
<div class="container" id="app">
  <!-- Header -->
  <header>
    <div class="brand">
      <div class="title">
        <i class="fas fa-bullhorn"></i>
        ุงูุฏูุงูุฉ
      </div>
      <nav aria-label="ูุงุฌูุฉ">
        <button type="button" class="nav-btn" data-target="home" aria-current="true">
          <i class="fas fa-home"></i>
          ุงูุฑุฆูุณูุฉ
        </button>
        <button type="button" class="nav-btn" data-target="send">
          <i class="fas fa-plus-circle"></i>
          ุฃูุดุฑ ุฅุนูุงูู
        </button>
        <button type="button" class="nav-btn" data-target="privacy">
          <i class="fas fa-shield-alt"></i>
          ุณูุงุณุฉ ุงูุฎุตูุตูุฉ
        </button>
      </nav>
    </div>
  </header>
  
  <!-- Messages Container -->
  <div id="msges-container"></div>
  
  <!-- Controls (Search & Filters) -->
  <div class="controls" id="listControls" role="search" aria-label="ุจุญุซ ูุชุญูู">
    <div style="flex:1;min-width:200px">
      <input id="q" type="search" placeholder="๐ ุงุจุญุซ ุจุงูุนููุงูุ ุงูุฑูุฒุ ุงููููุน ุฃู ุงููุตู...">
    </div>
    <div style="width:220px">
      <select id="catFilter">
        <option value="">๐ ูู ุงูุงูุณุงู</option>
      </select>
    </div>
    <div class="flex align-center gap-10">
      <div id="count" class="small" aria-live="polite">
        <i class="fas fa-spinner fa-spin"></i> ุชุญููู...
      </div>
      <button class="btn btn-light btn-small" onclick="refreshAds()" id="refreshBtn">
        <i class="fas fa-sync-alt"></i>
        ุชุญุฏูุซ
      </button>
    </div>
  </div>

  <!-- Ticker Tape -->
  <div id="tickerTape" role="marquee" aria-live="off">
    <div class="ticker-content">
      <span class="ticker-item"><i class="fas fa-bell"></i> ุณูุชู ุงูุชูุงุตู ูุน ุงููุฑุดุญูู ุงููุฎุชุงุฑูู ููุท</span>
      <span class="ticker-item">|</span>
      <span class="ticker-item"><i class="fas fa-briefcase"></i> ุงุบูุงู ุจุงุจ ุงูุชูุฏูู ููุธููุฉ: ูุณุคูู ุฏุนู ุงูุนููุงุก โ ุงูุฎุฑุทูู</span>
      <span class="ticker-item">|</span>
      <span class="ticker-item"><i class="fas fa-check-circle"></i> ุชุฃูุฏ ุฏุงุฆูุงู ูู ุตุญุฉ ุงููุนูููุงุช ุจููุณู ูุจู ุงูุชุนุงูู</span>
      <span class="ticker-item">|</span>
      <span class="ticker-item"><i class="fas fa-store"></i> ุงูุฏูุงูุฉุ ููุตุฉ ุฅููุชุฑูููุฉ ุชูุฏู ุฅูู ุชุณููู ูุดุฑ ุงูุฅุนูุงูุงุช</span>
    </div>
  </div>
  
  <!-- Main Content -->
  <main>
    <!-- Home Section -->
    <section id="home" class="active" aria-live="polite">
      <!-- Skeleton Loading -->
      <div id="skeletonGrid" class="grid" style="display: none;">
        <div class="skeleton-card">
          <div class="skeleton-media skeleton"></div>
          <div class="skeleton-body">
            <div class="skeleton-title skeleton"></div>
            <div class="skeleton-desc skeleton"></div>
            <div class="skeleton-desc skeleton"></div>
            <div class="skeleton-desc-short skeleton"></div>
            <div class="skeleton-meta">
              <div class="skeleton-badge skeleton"></div>
              <div class="skeleton-price skeleton"></div>
            </div>
          </div>
        </div>
        <!-- Repeat 5 more skeleton cards -->
        <div class="skeleton-card">
          <div class="skeleton-media skeleton"></div>
          <div class="skeleton-body">
            <div class="skeleton-title skeleton"></div>
            <div class="skeleton-desc skeleton"></div>
            <div class="skeleton-desc skeleton"></div>
            <div class="skeleton-desc-short skeleton"></div>
            <div class="skeleton-meta">
              <div class="skeleton-badge skeleton"></div>
              <div class="skeleton-price skeleton"></div>
            </div>
          </div>
        </div>
        <div class="skeleton-card">
          <div class="skeleton-media skeleton"></div>
          <div class="skeleton-body">
            <div class="skeleton-title skeleton"></div>
            <div class="skeleton-desc skeleton"></div>
            <div class="skeleton-desc skeleton"></div>
            <div class="skeleton-desc-short skeleton"></div>
            <div class="skeleton-meta">
              <div class="skeleton-badge skeleton"></div>
              <div class="skeleton-price skeleton"></div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Actual Ads Grid -->
      <div id="grid" class="grid" role="list" aria-label="ูุงุฆูุฉ ุงูุฅุนูุงูุงุช"></div>
      
      <!-- No Items Message -->
      <div id="noitems" style="display:none;text-align:center;margin-top:40px">
        <div class="flex-center flex-column gap-20">
          <i class="fas fa-inbox" style="font-size: 64px; color: var(--text-light);"></i>
          <div>
            <h3 style="color: var(--text-light); margin-bottom: 10px;">ูุง ุชูุฌุฏ ุฅุนูุงูุงุช</h3>
            <p style="color: var(--text-light);">ูู ุจุฅุถุงูุฉ ุฃูู ุฅุนูุงู ูู ุฎูุงู ุชุจููุจ "ุฃูุดุฑ ุฅุนูุงูู"</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Submit Ad Section -->
    <section id="send">
      <div class="panel">
        <h2><i class="fas fa-paper-plane"></i> ูุดุฑ ุฅุนูุงู ุฌุฏูุฏ</h2>
        <p style="color: var(--text-light); margin-bottom: 25px; line-height: 1.7;">
          ุงููุฃ ุงููููุฐุฌ ุงูุชุงูู ุจุฏูุฉ ูุชูุฏูู ุทูุจ ูุดุฑ ุฅุนูุงู. ุจุนุฏ ุฅุฑุณุงู ุงูุทูุจุ ุณูุชู ูุฑุงุฌุนุชู ูู ูุจู ุงูุฅุฏุงุฑุฉุ ูุณูุชู ุฅุดุนุงุฑู ุจุงููุชูุฌุฉ ุนุจุฑ WhatsApp.
        </p>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="f_name" class="required">
              <i class="fas fa-heading"></i>
              ุงุณู ุงูุฅุนูุงู
            </label>
            <input type="text" id="f_name" placeholder="ูุซุงู: ุดูุฉ ููุจูุน ูู ุงูุฎุฑุทูู" maxlength="100" required>
            <div class="char-counter" style="text-align: left; font-size: 12px; color: var(--text-light); margin-top: 5px;">
              <span id="nameCounter">0</span>/100
            </div>
          </div>
          
          <div class="form-group">
            <label for="f_price" class="required">
              <i class="fas fa-tag"></i>
              ุงูุณุนุฑ
            </label>
            <input type="text" id="f_price" placeholder="ูุซุงู: 100,000 ุฌููู" required>
          </div>
          
          <div class="form-group full-width">
            <label for="f_desc" class="required">
              <i class="fas fa-align-left"></i>
              ูุตู ุงูุฅุนูุงู
            </label>
            <textarea id="f_desc" placeholder="ูู ุจูุตู ุงูุฅุนูุงู ุจุดูู ุชูุตููู..." rows="5" maxlength="500" required></textarea>
            <div class="char-counter" style="text-align: left; font-size: 12px; color: var(--text-light); margin-top: 5px;">
              <span id="descCounter">0</span>/500
            </div>
          </div>
          
          <div class="form-group">
            <label for="f_loc" class="required">
              <i class="fas fa-map-marker-alt"></i>
              ุงููููุน
            </label>
            <input type="text" id="f_loc" placeholder="ูุซุงู: ุงูุฎุฑุทูู - ุงูุฑูุงุถ" required>
          </div>
          
          <div class="form-group">
            <label for="f_contact" class="required">
              <i class="fas fa-phone"></i>
              ุฑูู ุงูุชูุงุตู
            </label>
            <input type="text" id="f_contact" placeholder="ูุซุงู: 0912345678" pattern="[0-9+]{10,15}" required>
            <small style="display: block; color: var(--text-light); margin-top: 5px;">
              ูุฌุจ ุฃู ูุญุชูู ุนูู 10 ุฃุฑูุงู ุนูู ุงูุฃูู
            </small>
          </div>
          
          <div class="form-group">
            <label for="f_cat" class="required">
              <i class="fas fa-folder"></i>
              ุงููุณู
            </label>
            <select id="f_cat" required>
              <option value="">ุงุฎุชุฑ ุงููุณู</option>
              <option value="ุนูุงุฑุงุช">ุนูุงุฑุงุช</option>
              <option value="ุณูุงุฑุงุช">ุณูุงุฑุงุช</option>
              <option value="ุฃุฌูุฒุฉ ุฅููุชุฑูููุฉ">ุฃุฌูุฒุฉ ุฅููุชุฑูููุฉ</option>
              <option value="ุฃุซุงุซ">ุฃุซุงุซ</option>
              <option value="ูุธุงุฆู">ูุธุงุฆู</option>
              <option value="ุฎุฏูุงุช">ุฎุฏูุงุช</option>
              <option value="ุฃุฎุฑู">ุฃุฎุฑู</option>
            </select>
          </div>
          
          <div class="form-group full-width">
            <label for="f_file">
              <i class="fas fa-image"></i>
              ุตูุฑุฉ ุงูุฅุนูุงู
            </label>
            <div class="file-input-container">
              <div class="file-input-label">
                <i class="fas fa-cloud-upload-alt"></i>
                <div>
                  <strong>ุงุณุญุจ ูุฃููุช ุงูุตูุฑุฉ ููุง</strong>
                  <div style="font-size: 13px; margin-top: 5px;">ุฃู ุงููุฑ ูุงุฎุชูุงุฑ ุตูุฑุฉ</div>
                </div>
                <div style="font-size: 12px; color: var(--text-light);">
                  ุงูุญุฏ ุงูุฃูุตู: 2 ููุฌุงุจุงูุช | ุงูุตูุบ ุงููุฏุนููุฉ: JPG, PNG, GIF
                </div>
              </div>
              <input type="file" id="f_file" accept="image/*">
            </div>
            <div class="file-preview" id="filePreview">
              <img id="previewImage" src="" alt="ูุนุงููุฉ ุงูุตูุฑุฉ">
              <div class="file-info" id="fileInfo"></div>
              <button type="button" class="btn btn-danger btn-small mt-20" onclick="removeImage()">
                <i class="fas fa-trash"></i> ุฅุฒุงูุฉ ุงูุตูุฑุฉ
              </button>
            </div>
          </div>
        </div>
        
        <div class="checkbox-group">
          <input type="checkbox" id="agree" required>
          <label for="agree">
            <strong>ุฃูุฑ ูุฃูุงูู</strong> ุนูู ุฃู ุฌููุน ุงูุจูุงูุงุช ุงูููุฏูุฉ ุตุญูุญุฉุ ูุฃูุงูู ุนูู 
            <a href="#privacy" style="color: var(--primary-color);" onclick="showPrivacy()">ุดุฑูุท ุงูุงุณุชุฎุฏุงู ูุณูุงุณุฉ ุงูุฎุตูุตูุฉ</a>
          </label>
        </div>
        
        <div class="submit-area">
          <div style="display:flex;gap:15px;align-items:center;flex-wrap:wrap">
            <button id="submitBtn" class="btn btn-success" type="button">
              <i class="fas fa-paper-plane"></i>
              ุฅุฑุณุงู ุงูุฅุนูุงู ูููุฑุงุฌุนุฉ
            </button>
            <div id="submitStatus" style="flex:1;min-width:200px"></div>
          </div>
          
          <div id="afterSubmit" style="display:none;">
            <div class="cta-section" style="margin:0;padding:25px;">
              <h3><i class="fas fa-check-circle"></i> ุชู ุฅุฑุณุงู ุงูุฅุนูุงู ุจูุฌุงุญ!</h3>
              <p style="opacity:0.9;margin-bottom:20px;">
                ุชู ุฅุฑุณุงู ุฅุนูุงูู ูููุฑุงุฌุนุฉ. ูุฑุฌู ุงุณุชุฎุฏุงู ุงูุฑูุฒ ุงููุฑุฌุนู ุฃุฏูุงู ุนูุฏ ุงูุชูุงุตู.
              </p>
              <div class="flex-center flex-column gap-20">
                <div style="background:white;color:var(--dark-color);padding:15px 25px;border-radius:var(--radius-md);font-size:18px;font-weight:bold;letter-spacing:2px;">
                  <i class="fas fa-hashtag"></i>
                  <span id="refCode" class="refCode"></span>
                </div>
                <a id="openWa" class="btn btn-warning" target="_blank" style="text-decoration:none;">
                  <i class="fab fa-whatsapp"></i>
                  ุฅุฑุณุงู ุฅุดุนุงุฑ ุงูููุงููุฉ ุนุจุฑ WhatsApp
                </a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Privacy Section -->
    <section id="privacy">
      <div class="panel">
        <h2><i class="fas fa-shield-alt"></i> ุณูุงุณุฉ ุงูุฎุตูุตูุฉ ูุดุฑูุท ุงูุงุณุชุฎุฏุงู</h2>
        <div style="white-space:pre-wrap;background:#f8fafc;padding:25px;border-radius:var(--radius-md);border:1px solid var(--border-color);margin-top:15px;line-height:1.8;font-size:14px;">
ูุฑุญุจูุง ุจู ูู ููุตุฉ ุงูุฏูุงูุฉุ ููุตุฉ ุฅููุชุฑูููุฉ ุชูุฏู ุฅูู ุชุณููู ูุดุฑ ุงูุฅุนูุงูุงุช ุงููุจูุจุฉ ูุชูููู ุงููุณุชุฎุฏููู ูู ุงูุจูุน ูุงูุดุฑุงุก ูุงูุชูุงุตู ุจุณูููุฉ ุฏุงุฎู ุงูุณูุฏุงู.

1. ูุทุงู ุงูุฎุฏูุฉ
ุชูููุฑ ููุตุฉ ุงูุฏูุงูุฉ ูุณูุทูุง ุชููููุง ูุนุฑุถ ุงูุฅุนูุงูุงุชุ ููุง ุชุชุฏุฎู ูู ุฃู ูุนุงููุงุช ุชุฌุงุฑูุฉ ุจูู ุงููุณุชุฎุฏููู. ุฌููุน ุงูุชุนุงููุงุช ุชุชู ุนูู ูุณุคูููุฉ ุงููุณุชุฎุฏููู ุงูุดุฎุตูุฉ.

2. ุงูุชุฒุงูุงุช ุงููุณุชุฎุฏู
ูุชุนูุฏ ุงููุณุชุฎุฏู ุจูุง ููู:
- ุชูุฏูู ูุนูููุงุช ุตุญูุญุฉ ูุฏูููุฉ
- ุนุฏู ูุดุฑ ูุญุชูู ูุฎุงูู ุฃู ูุณูุก
- ุงุญุชุฑุงู ุญููู ุงูููููุฉ ุงูููุฑูุฉ
- ุนุฏู ุงุณุชุฎุฏุงู ุงูููุตุฉ ูู ุฃูุดุทุฉ ุบูุฑ ูุงููููุฉ

3. ุงูุฎุตูุตูุฉ ูุงูุฃูุงู
ูุญุงูุธ ุนูู ุฎุตูุตูุฉ ุจูุงูุงุชู ููุง ูุดุงุฑููุง ูุน ุฃุทุฑุงู ุซุงูุซุฉ ุฏูู ููุงููุชูุ ุฅูุง ูู ุงูุญุงูุงุช ุงูุชู ููุชุถููุง ุงููุงููู.

4. ุงูุชุนุฏููุงุช
ูุญุชูุธ ุจุงูุญู ูู ุชุนุฏูู ูุฐู ุงูุดุฑูุท ูู ุฃู ููุชุ ูุณูุชู ุฅุนูุงู ุงููุณุชุฎุฏููู ุจุงูุชุบููุฑุงุช ุนุจุฑ ุงูููุตุฉ.

5. ุงููุณุคูููุฉ
ุชุชุญูู ุงูููุตุฉ ูุณุคูููุฉ ุชูููุฑ ุฎุฏูุฉ ูุณุชูุฑุฉ ูุขููุฉุ ูููููุง ูุง ุชุชุญูู ูุณุคูููุฉ ุฃู ุฎุณุงุฆุฑ ูุงุชุฌุฉ ุนู ุชุนุงููุงุช ุจูู ุงููุณุชุฎุฏููู.

6. ุงูุงุชุตุงู
ููุงุณุชูุณุงุฑุงุช ุฃู ุงูุดูุงููุ ูุฑุฌู ุงูุชูุงุตู ุนุจุฑ:
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: info@eldelala.com
- WhatsApp: +249998615193

        </div>
      </div>
    </section>
  </main>
  
  <!-- Call to Action -->
  <div class="cta-section">
    <h2><i class="fas fa-bullhorn"></i> ุงุจุฏุฃ ุงูุขู ููุดุฑ ุฅุนูุงูู</h2>
    <p>ุงูุถู ุฅูู ุขูุงู ุงููุณุชุฎุฏููู ุงูุฐูู ูุณุชููุฏูู ูู ููุตุชูุง ููุดุฑ ุฅุนูุงูุงุชูู ูุงููุตูู ุฅูู ุฌูููุฑ ูุงุณุน ูู ุฌููุน ุฃูุญุงุก ุงูุณูุฏุงู.</p>
    <button class="btn" style="background:white;color:var(--primary-color);font-size:16px;" onclick="goToSubmit()">
      <i class="fas fa-plus-circle"></i>
      ูุดุฑ ุฅุนูุงู ุฌุฏูุฏ
    </button>
  </div>
  
  <!-- Footer -->
  <footer>
    <div class="container">
      <div>
        <strong>ุงูุฏูุงูุฉ</strong> โ ุชุฃูุฏ ุฏุงุฆูุงู ูู ุตุญุฉ ุงููุนูููุงุช ุจููุณู ูุจู ุงูุชุนุงูู.
      </div>
      <div class="footer-links">
        <a href="#privacy" onclick="showPrivacy()">
          <i class="fas fa-shield-alt"></i>
          ุณูุงุณุฉ ุงูุฎุตูุตูุฉ
        </a>
        <a href="https://wa.me/249998615193" target="_blank">
          <i class="fab fa-whatsapp"></i>
          ุงูุฏุนู ุงูููู
        </a>
        <a href="mailto:info@eldelala.com">
          <i class="fas fa-envelope"></i>
          ุงุชุตู ุจูุง
        </a>
      </div>
      <div style="font-size:12px;opacity:0.8;">
        ยฉ 2024 ุงูุฏูุงูุฉ. ุฌููุน ุงูุญููู ูุญููุธุฉ.
      </div>
    </div>
  </footer>
</div>

<!-- Ad Details Modal -->
<div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
  <div class="modalCard">
    <div class="modalHeader">
      <div>
        <h2 id="modalTitle"></h2>
        <div class="modalRef" id="modalMeta"></div>
      </div>
      <button id="modalClose" class="btn btn-danger" type="button">
        <i class="fas fa-times"></i>
        ุฅุบูุงู
      </button>
    </div>
    
    <div class="modalMain">
      <div class="modalImage">
        <img id="modalMainImg" src="" alt="" style="display:none" />
        <div id="modalNoImage" class="no-image" style="display:flex;">
          <i class="fas fa-image fa-4x"></i>
          <div>ูุง ุชูุฌุฏ ุตูุฑุฉ ูุชุงุญุฉ</div>
        </div>
      </div>
      
      <div class="modalContent">
        <div id="modalDescription" class="modalDescription"></div>
        
        <div class="detailsGrid">
          <div class="detailItem">
            <strong><i class="fas fa-map-marker-alt"></i> ุงููููุน</strong>
            <div class="detailValue" id="modalLoc"></div>
          </div>
          <div class="detailItem">
            <strong><i class="fas fa-folder"></i> ุงูุชุตููู</strong>
            <div class="detailValue badge" id="modalCat"></div>
          </div>
          <div class="detailItem">
            <strong><i class="fas fa-tag"></i> ุงูุณุนุฑ</strong>
            <div class="detailValue price" id="modalPrice"></div>
          </div>
          <div class="detailItem">
            <strong><i class="fas fa-phone"></i> ุงูุชูุงุตู</strong>
            <div class="detailValue" id="modalContact"></div>
          </div>
          <div class="detailItem">
            <strong><i class="fas fa-calendar"></i> ุชุงุฑูุฎ ุงููุดุฑ</strong>
            <div class="detailValue" id="modalDate"></div>
          </div>
          <div class="detailItem">
            <strong><i class="fas fa-hashtag"></i> ุงูุฑูุฒ ุงููุฑุฌุนู</strong>
            <div class="detailValue ref-code" id="modalRefCode"></div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="modalActions">
      <div class="action-group">
        <a id="modalWhatsShare" class="btn btn-success" target="_blank" rel="noopener">
          <i class="fab fa-whatsapp"></i>
          ูุดุงุฑูุฉ ุนุจุฑ ูุงุชุณุงุจ
        </a>
        <a id="modalWhatsChat" class="btn btn-warning" target="_blank" rel="noopener">
          <i class="fas fa-comment"></i>
          ูุญุงุฏุซุฉ ุนุจุฑ ูุงุชุณุงุจ
        </a>
        <a id="modalCall" class="btn btn-light" style="display:none">
          <i class="fas fa-phone"></i>
          ุงุชุตุงู ูุจุงุดุฑ
        </a>
      </div>
      <div class="note">
        <i class="fas fa-exclamation-circle"></i>
        ููุงุญุธุฉ: ุชุฃูุฏ ูู ุตุญุฉ ุงููุนูููุงุช ุจููุณู ูุจู ุงูุชุนุงูู.
      </div>
    </div>
  </div>
</div>

<script>
// ==========================================================
// ๐ฏ CONFIGURATION
// ==========================================================
const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxTf9YzC4nnfMlVvs6svegYa0tmCfRlh6xyNJ1xEn8qXWOGF-E-icAcc6nA7PgINbi4/exec';
const WHATSAPP_NUMBER = '249998615193';

// Cache configuration
const CACHE_KEY = 'eldelala_ads_cache';
const CACHE_DURATION = 5 * 60 * 1000; // 5 minutes

// ==========================================================
// ๐๏ธ UTILITY FUNCTIONS
// ==========================================================
function escapeHtml(s) { 
  return String(s || '').replace(/[&<>\"']/g, c => ({
    '&':'&amp;', '<':'&lt;', '>':'&gt;', '"':'&quot;', "'":"&#39;"
  }[c] || c)); 
}

function debounce(fn, t = 300) { 
  let timer; 
  return (...a) => { 
    clearTimeout(timer); 
    timer = setTimeout(() => fn(...a), t); 
  }; 
}

function genRef() { 
  return 'R' + Date.now().toString(36).slice(-6).toUpperCase(); 
}

function fileToBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result);
    reader.onerror = error => reject(error);
    reader.readAsDataURL(file);
  });
}

// Image compression function
async function compressImage(file, maxWidth = 800, quality = 0.7) {
  return new Promise((resolve, reject) => {
    if (!file.type.match('image.*')) {
      reject(new Error('File is not an image'));
      return;
    }
    
    // Don't compress small images (< 100KB)
    if (file.size < 102400) {
      resolve(null); // No compression needed
      return;
    }
    
    const reader = new FileReader();
    reader.onload = function(e) {
      const img = new Image();
      img.onload = function() {
        const canvas = document.createElement('canvas');
        let width = img.width;
        let height = img.height;
        
        // Calculate new dimensions
        if (width > maxWidth) {
          height = Math.round((height * maxWidth) / width);
          width = maxWidth;
        }
        
        canvas.width = width;
        canvas.height = height;
        
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img, 0, 0, width, height);
        
        // Adjust quality based on file size
        let finalQuality = quality;
        if (file.size > 1024 * 1024) { // >1MB
          finalQuality = 0.6;
        }
        if (file.size > 2 * 1024 * 1024) { // >2MB
          finalQuality = 0.5;
        }
        
        // Convert to base64
        const compressedBase64 = canvas.toDataURL('image/jpeg', finalQuality);
        
        // Calculate compression ratio
        const originalSize = file.size;
        const compressedSize = Math.floor((compressedBase64.length * 3) / 4); // Approximate
        
        console.log(`Image compressed: ${(originalSize/1024).toFixed(1)}KB โ ${(compressedSize/1024).toFixed(1)}KB (${Math.round((1 - compressedSize/originalSize) * 100)}% reduction)`);
        
        resolve({
          base64: compressedBase64,
          originalSize,
          compressedSize,
          reduction: Math.round((1 - compressedSize/originalSize) * 100)
        });
      };
      img.src = e.target.result;
    };
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

// ==========================================================
// ๐ฑ NAVIGATION
// ==========================================================
const listControls = document.getElementById('listControls');
document.querySelectorAll('.nav-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const target = btn.dataset.target;
    
    // Update active section
    document.querySelectorAll('main > section').forEach(s => s.classList.remove('active'));
    document.getElementById(target).classList.add('active');
    
    // Update active nav button
    document.querySelectorAll('.nav-btn').forEach(n => n.removeAttribute('aria-current'));
    btn.setAttribute('aria-current', 'true');
    
    // Show/hide controls
    listControls.style.display = (target === 'home') ? 'flex' : 'none';
    
    // Scroll to top
    window.scrollTo({ top: 0, behavior: 'smooth' });
    
    // Clear messages when switching sections
    const container = document.getElementById('msges-container');
    if (container) container.innerHTML = '';
    checkAndToggleVisibility();
  });
});

// ==========================================================
// ๐ ADS DATA & RENDERING
// ==========================================================
let ads = [];
const grid = document.getElementById('grid');
const skeletonGrid = document.getElementById('skeletonGrid');
const qEl = document.getElementById('q');
const catFilter = document.getElementById('catFilter');
const countEl = document.getElementById('count');
const refreshBtn = document.getElementById('refreshBtn');

// Character counters
const nameCounter = document.getElementById('nameCounter');
const descCounter = document.getElementById('descCounter');
const f_name = document.getElementById('f_name');
const f_desc = document.getElementById('f_desc');

f_name.addEventListener('input', () => {
  nameCounter.textContent = f_name.value.length;
});

f_desc.addEventListener('input', () => {
  descCounter.textContent = f_desc.value.length;
});

function renderGrid(list) {
  const noItems = document.getElementById('noitems');
  grid.innerHTML = '';
  
  list = list || [];
  
  if (!list.length) {
    noItems.style.display = 'block';
    countEl.innerHTML = '<i class="fas fa-info-circle"></i> 0 ุฅุนูุงู';
    return;
  }
  
  noItems.style.display = 'none';
  
  list.forEach(a => {
    const el = document.createElement('div');
    el.className = 'card';
    if (a.ref_code) el.id = 'ad-' + a.ref_code;
    
    const mediaHtml = a.imageBase64 
      ? `<img src="${escapeHtml(a.imageBase64)}" alt="${escapeHtml(a.name || '')}" loading="lazy">`
      : `<div class="no-image"><i class="fas fa-image fa-3x"></i><div>ูุง ุชูุฌุฏ ุตูุฑุฉ</div></div>`;
    
    // Format date
    let dateString = '-';
    try {
      dateString = a.submission_date ? new Date(a.submission_date).toLocaleDateString('ar-EG', {
        year: 'numeric',
        month: 'short',
        day: 'numeric'
      }) : '-';
    } catch (e) {
      console.warn('Date parsing error:', e);
    }
    
    // Extract phone number for WhatsApp
    const phoneMatch = (a.contact || '').match(/[0-9+]{10,}/);
    const phoneNumber = phoneMatch ? phoneMatch[0].replace(/\s+/g, '') : '';
    
    // WhatsApp share URL
    const shareUrl = `https://wa.me/?text=${encodeURIComponent(
      `๐ข ${a.name || ''}\n๐ฐ ${a.price || ''}\n๐ ${a.location || ''}\n๐ ${a.contact || ''}\n\n๐ ${window.location.href.split('#')[0]}#ad-${a.ref_code}`
    )}`;
    
    // WhatsApp chat URL (if phone number available)
    const chatUrl = phoneNumber ? `https://wa.me/${phoneNumber}` : '#';
    
    // Call URL (if phone number available)
    const callUrl = phoneNumber ? `tel:${phoneNumber}` : '#';
    
    el.innerHTML = `
      <div class="media">${mediaHtml}</div>
      <div class="body">
        <div class="title">${escapeHtml(a.name || '')}</div>
        <div class="desc">${escapeHtml(a.description || '')}</div>
        <div class="meta">
          <div class="badge"><i class="fas fa-folder"></i> ${escapeHtml(a.category || 'ุนุงู')}</div>
          <div class="price">${escapeHtml(a.price || '')}</div>
        </div>
        <div class="meta">
          <div><i class="fas fa-map-marker-alt"></i> ${escapeHtml(a.location || '')}</div>
          <div class="ref-code"><i class="fas fa-hashtag"></i> ${escapeHtml(a.ref_code || '')}</div>
        </div>
      </div>
      <div class="card-actions">
        <a href="${shareUrl}" class="btn btn-success" target="_blank" onclick="event.stopPropagation();">
          <i class="fab fa-whatsapp"></i> ูุดุงุฑูุฉ
        </a>
        <a href="${chatUrl}" class="btn btn-warning" target="_blank" onclick="event.stopPropagation();" ${!phoneNumber ? 'style="opacity:0.5;cursor:not-allowed;"' : ''}>
          <i class="fas fa-comment"></i> ูุญุงุฏุซุฉ
        </a>
        <a href="${callUrl}" class="btn btn-light" onclick="event.stopPropagation();" ${!phoneNumber ? 'style="display:none;"' : ''}>
          <i class="fas fa-phone"></i> ุงุชุตุงู
        </a>
      </div>
    `;
    
    el.addEventListener('click', () => openDetails(a));
    grid.appendChild(el);
  });
  
  countEl.innerHTML = `<i class="fas fa-ad"></i> ${list.length} ุฅุนูุงู`;
}

function applyFiltersAndRender() {
  const q = (qEl && qEl.value || '').trim().toLowerCase();
  const cat = (catFilter && catFilter.value || '').trim();
  let out = ads.slice();

  if (cat) {
    out = out.filter(a => (a.category || '').toString() === cat);
  }
  
  if (q) {
    out = out.filter(a => {
      const hay = ((a.name || '') + ' ' + (a.description || '') + ' ' + (a.location || '') + ' ' + (a.ref_code || '')).toLowerCase();
      return hay.indexOf(q) !== -1;
    });
  }
  
  // Sort by date (newest first)
  out.sort((A, B) => {
    const timeSort = (B.ref_code || '').localeCompare((A.ref_code || ''));
    if (timeSort !== 0) return timeSort;
    return (A.name || '').toString().localeCompare((B.name || '').toString(), 'ar');
  });
  
  renderGrid(out);
}

// ==========================================================
// ๐ MODAL FUNCTIONS
// ==========================================================
const modal = document.getElementById('modal');
const modalMainImg = document.getElementById('modalMainImg');
const modalNoImage = document.getElementById('modalNoImage');
const modalTitle = document.getElementById('modalTitle');
const modalMeta = document.getElementById('modalMeta');
const modalDescription = document.getElementById('modalDescription');
const modalLoc = document.getElementById('modalLoc');
const modalCat = document.getElementById('modalCat');
const modalPrice = document.getElementById('modalPrice');
const modalContact = document.getElementById('modalContact');
const modalDate = document.getElementById('modalDate');
const modalRefCode = document.getElementById('modalRefCode');
const modalWhatsShare = document.getElementById('modalWhatsShare');
const modalWhatsChat = document.getElementById('modalWhatsChat');
const modalCall = document.getElementById('modalCall');
const modalClose = document.getElementById('modalClose');

function closeModal() {
  modal.setAttribute('aria-hidden', 'true');
  modal.classList.remove('open');
}

modalClose.addEventListener('click', closeModal);
modal.addEventListener('click', e => { 
  if (e.target === modal) closeModal(); 
});
document.addEventListener('keydown', e => { 
  if (e.key === 'Escape') closeModal(); 
});

async function openDetails(item) {
  // Set modal content
  modalTitle.textContent = item.name || 'ุจุฏูู ุนููุงู';
  modalMeta.textContent = `ุฑูุฒ: ${item.ref_code || ''}`;
  modalDescription.textContent = item.description || '-';
  modalLoc.textContent = item.location || '-';
  modalCat.textContent = item.category || 'ุนุงู';
  modalPrice.textContent = item.price || '-';
  modalContact.textContent = item.contact || '-';
  modalRefCode.textContent = item.ref_code || '-';
  
  // Format date
  try {
    modalDate.textContent = item.submission_date ? new Date(item.submission_date).toLocaleDateString('ar-EG', {
      year: 'numeric',
      month: 'long',
      day: 'numeric',
      weekday: 'long'
    }) : '-';
  } catch (e) {
    modalDate.textContent = '-';
  }
  
  // Set image
  const imgSrc = item.imageBase64;
  if (imgSrc) {
    modalMainImg.src = imgSrc;
    modalMainImg.style.display = 'block';
    modalNoImage.style.display = 'none';
  } else {
    modalMainImg.src = '';
    modalMainImg.style.display = 'none';
    modalNoImage.style.display = 'flex';
  }
  
  // Extract phone number for actions
  const phoneMatch = (item.contact || '').match(/[0-9+]{10,}/);
  const phoneNumber = phoneMatch ? phoneMatch[0].replace(/\s+/g, '') : '';
  
  // Set WhatsApp share URL
  const baseUrl = window.location.href.split('#')[0];
  const deepLink = baseUrl + '#ad-' + (item.ref_code || '');
  const shareText = `๐ข ${item.name || ''}\n๐ฐ ${item.price || ''}\n๐ ${item.location || ''}\n๐ ${item.contact || ''}\n๐ ${item.description?.substring(0, 100) || ''}...\n\n๐ ${deepLink}`;
  modalWhatsShare.href = 'https://wa.me/?text=' + encodeURIComponent(shareText);
  
  // Set WhatsApp chat URL
  modalWhatsChat.href = phoneNumber ? `https://wa.me/${phoneNumber}` : '#';
  if (!phoneNumber) {
    modalWhatsChat.style.opacity = '0.5';
    modalWhatsChat.style.cursor = 'not-allowed';
    modalWhatsChat.onclick = (e) => e.preventDefault();
  } else {
    modalWhatsChat.style.opacity = '1';
    modalWhatsChat.style.cursor = 'pointer';
    modalWhatsChat.onclick = null;
  }
  
  // Set call URL
  if (phoneNumber) {
    modalCall.href = 'tel:' + phoneNumber;
    modalCall.style.display = 'inline-flex';
  } else {
    modalCall.style.display = 'none';
  }
  
  // Update URL hash
  try {
    if (item.ref_code) {
      const newHash = '#ad-' + encodeURIComponent(item.ref_code);
      if (window.location.hash !== newHash) {
        history.replaceState(null, '', baseUrl + newHash);
      }
    }
  } catch (e) {
    console.warn('Error updating hash:', e);
  }
  
  // Show modal
  modal.classList.add('open');
  modal.setAttribute('aria-hidden', 'false');
}

// ==========================================================
// ๐ก DATA LOADING & CACHE
// ==========================================================
async function loadAdsFromGoogleSheet() {
  if (APPS_SCRIPT_URL === '') {
    displayMessage('error', 'โ๏ธ ุงูุฑุฌุงุก ุชุญุฏูุซ ุฑุงุจุท ุณูุฑุจุช Google Apps Script ูู ููู index.html.');
    return;
  }
  
  const url = APPS_SCRIPT_URL + '?action=fetchPublished';
  const noItemsEl = document.getElementById('noitems');
  
  try {
    // Show skeleton loading
    skeletonGrid.style.display = 'grid';
    grid.style.display = 'none';
    
    noItemsEl.textContent = 'ุฌุงุฑู ุชุญููู ุงูุฅุนูุงูุงุช...';
    noItemsEl.style.display = 'none';
    
    const res = await fetch(url, { 
      method: 'GET', 
      cache: 'no-store',
      headers: {
        'Cache-Control': 'no-cache'
      }
    });
    
    if (!res.ok) throw new Error('Network response was not ok');
    
    const result = await res.json();
    
    if (result.status === 'success' && Array.isArray(result.ads)) {
      ads = result.ads;
      
      // Update categories dropdown
      const cats = [...new Set(ads.map(a => a.category || 'ุนุงู'))];
      cats.sort((a, b) => a.toString().localeCompare(b.toString(), 'ar'));
      
      if (catFilter) {
        catFilter.innerHTML = '<option value="">๐ ูู ุงูุงูุณุงู</option>' +
          cats.map(c => `<option value="${escapeHtml(c)}">${escapeHtml(c)}</option>`).join('');
      }
      
      // Apply filters and render
      applyFiltersAndRender();
      
      // Hide skeleton, show grid
      setTimeout(() => {
        skeletonGrid.style.display = 'none';
        grid.style.display = 'grid';
      }, 500);
      
      if (ads.length > 0) {
        noItemsEl.style.display = 'none';
      }
      
      // Update cache
      localStorage.setItem(CACHE_KEY, JSON.stringify({
        data: ads,
        timestamp: Date.now()
      }));
      
    } else {
      throw new Error(result.message || 'Failed to fetch ads from Sheet.');
    }
    
  } catch (err) {
    console.error('loadAdsFromGoogleSheet failed', err);
    
    // Try to load from cache
    const cached = localStorage.getItem(CACHE_KEY);
    if (cached) {
      const { data, timestamp } = JSON.parse(cached);
      const age = Date.now() - timestamp;
      
      if (age < CACHE_DURATION && data.length > 0) {
        console.log(`Using cached ads (${Math.floor(age/1000)}s old)`);
        ads = data;
        applyFiltersAndRender();
        displayMessage('warning', 'โ๏ธ ุฌุงุฑู ุงุณุชุฎุฏุงู ุงูุจูุงูุงุช ุงููุฎุฒูุฉ ูุคูุชูุง. ูุฏ ูุง ุชููู ูุญุฏุซุฉ.');
        
        skeletonGrid.style.display = 'none';
        grid.style.display = 'grid';
        return;
      }
    }
    
    // Show error
    skeletonGrid.style.display = 'none';
    grid.style.display = 'grid';
    
    if (noItemsEl) {
      noItemsEl.style.display = 'block';
      noItemsEl.innerHTML = `
        <div class="flex-center flex-column gap-20">
          <i class="fas fa-exclamation-triangle" style="font-size: 64px; color: var(--danger-color);"></i>
          <div>
            <h3 style="color: var(--danger-color); margin-bottom: 10px;">ุชุนุฐุฑ ุชุญููู ุงูุฅุนูุงูุงุช</h3>
            <p style="color: var(--text-light);">ูุฑุฌู ุงูุชุญูู ูู ุงุชุตุงู ุงูุฅูุชุฑูุช ูุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.</p>
          </div>
          <button class="btn" onclick="loadAdsFromGoogleSheet()">
            <i class="fas fa-sync-alt"></i>
            ุฅุนุงุฏุฉ ุงููุญุงููุฉ
          </button>
        </div>
      `;
    }
    
    displayMessage('error', 'โ ูุดู ุชุญููู ุงูุฅุนูุงูุงุช. ุชุฃูุฏ ูู ุงุชุตุงู ุงูุฅูุชุฑูุช ูุฅุนุฏุงุฏ ุงูุณูุฑุจุช.');
  }
}

// Refresh ads function
async function refreshAds() {
  refreshBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
  refreshBtn.disabled = true;
  
  // Clear cache
  localStorage.removeItem(CACHE_KEY);
  
  await loadAdsFromGoogleSheet();
  
  refreshBtn.innerHTML = '<i class="fas fa-sync-alt"></i> ุชุญุฏูุซ';
  refreshBtn.disabled = false;
  
  displayMessage('success', 'โ ุชู ุชุญุฏูุซ ุงูุฅุนูุงูุงุช ุจูุฌุงุญ.');
}

// ==========================================================
// ๐ฌ MESSAGE SYSTEM
// ==========================================================
const msgContainer = document.getElementById('msges-container');

function checkAndToggleVisibility() {
  if (!msgContainer) return;
  if (msgContainer.children.length === 0) {
    msgContainer.style.display = 'none';
  } else {
    msgContainer.style.display = 'block';
  }
}

function displayMessage(type, text) {
  if (!msgContainer) return;
  
  try {
    const newMsg = document.createElement('div');
    newMsg.className = `msges-box ${type}`;
    
    const icon = type === 'success' ? 'fa-check-circle' :
                 type === 'error' ? 'fa-exclamation-circle' :
                 type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle';
    
    newMsg.innerHTML = `
      <div style="display:flex;align-items:center;gap:10px;">
        <i class="fas ${icon}"></i>
        <span>${text}</span>
      </div>
      <button class="close-btn" onclick="this.parentElement.remove(); checkAndToggleVisibility();">&times;</button>
    `;
    
    msgContainer.appendChild(newMsg);
    checkAndToggleVisibility();
    
    // Auto-remove success messages after 5 seconds
    if (type === 'success') {
      setTimeout(() => {
        if (newMsg.parentNode) {
          newMsg.remove();
          checkAndToggleVisibility();
        }
      }, 5000);
    }
    
  } catch (error) {
    console.error("Error displaying message:", error);
  }
}

// ==========================================================
// ๐ SUBMIT AD SYSTEM
// ==========================================================
(function() {
  const submitBtn = document.getElementById('submitBtn');
  const submitStatus = document.getElementById('submitStatus');
  const afterSubmit = document.getElementById('afterSubmit');
  const refCodeEl = document.getElementById('refCode');
  const openWa = document.getElementById('openWa');
  const f_name = document.getElementById('f_name');
  const f_price = document.getElementById('f_price');
  const f_desc = document.getElementById('f_desc');
  const f_loc = document.getElementById('f_loc');
  const f_contact = document.getElementById('f_contact');
  const f_cat = document.getElementById('f_cat');
  const f_file = document.getElementById('f_file');
  const agree = document.getElementById('agree');
  const filePreview = document.getElementById('filePreview');
  const previewImage = document.getElementById('previewImage');
  const fileInfo = document.getElementById('fileInfo');
  
  let selectedFile = null;
  
  // File input handling
  f_file.addEventListener('change', async function(e) {
    if (!this.files || this.files.length === 0) {
      filePreview.style.display = 'none';
      selectedFile = null;
      return;
    }
    
    const file = this.files[0];
    selectedFile = file;
    
    // Validate file size (max 2MB)
    if (file.size > 2 * 1024 * 1024) {
      displayMessage('error', 'โ๏ธ ุญุฌู ุงูุตูุฑุฉ ูุจูุฑ ุฌุฏุงู (ุงูุญุฏ ุงูุฃูุตู 2MB).');
      this.value = '';
      filePreview.style.display = 'none';
      selectedFile = null;
      return;
    }
    
    // Validate file type
    if (!file.type.match('image.*')) {
      displayMessage('error', 'โ๏ธ ุงูุฑุฌุงุก ุงุฎุชูุงุฑ ุตูุฑุฉ ููุท.');
      this.value = '';
      filePreview.style.display = 'none';
      selectedFile = null;
      return;
    }
    
    // Show preview
    const reader = new FileReader();
    reader.onload = function(e) {
      previewImage.src = e.target.result;
      filePreview.style.display = 'block';
      
      // Show file info
      const sizeInMB = (file.size / (1024 * 1024)).toFixed(2);
      fileInfo.innerHTML = `
        <div><strong>ุงุณู ุงูููู:</strong> ${file.name}</div>
        <div><strong>ุงูุญุฌู:</strong> ${sizeInMB} MB</div>
        <div><strong>ุงูููุน:</strong> ${file.type}</div>
      `;
    };
    reader.readAsDataURL(file);
  });
  
  // Remove image function
  window.removeImage = function() {
    f_file.value = '';
    filePreview.style.display = 'none';
    selectedFile = null;
  };
  
  // Form validation
  function validateForm() {
    // Clear previous messages
    msgContainer.innerHTML = '';
    checkAndToggleVisibility();
    
    const errors = [];
    
    // Name validation
    if (!f_name.value || f_name.value.trim().length < 3) {
      errors.push('ุงุณู ุงูุฅุนูุงู ูุฌุจ ุฃู ูููู 3 ุฃุญุฑู ุนูู ุงูุฃูู');
      f_name.focus();
    }
    
    // Price validation
    if (!f_price.value || f_price.value.trim().length < 1) {
      errors.push('ุงูุณุนุฑ ูุทููุจ');
      f_price.focus();
    }
    
    // Description validation
    if (!f_desc.value || f_desc.value.trim().length < 10) {
      errors.push('ุงููุตู ูุฌุจ ุฃู ูููู 10 ุฃุญุฑู ุนูู ุงูุฃูู');
      f_desc.focus();
    }
    
    // Location validation
    if (!f_loc.value || f_loc.value.trim().length < 3) {
      errors.push('ุงููููุน ูุทููุจ');
      f_loc.focus();
    }
    
    // Contact validation
    const contactRegex = /[0-9+]{10,}/;
    if (!f_contact.value || !contactRegex.test(f_contact.value)) {
      errors.push('ุฑูู ุงูุชูุงุตู ูุฌุจ ุฃู ูุญุชูู ุนูู 10 ุฃุฑูุงู ุนูู ุงูุฃูู');
      f_contact.focus();
    }
    
    // Category validation
    if (!f_cat.value) {
      errors.push('ุงููุณู ูุทููุจ');
      f_cat.focus();
    }
    
    // Agreement validation
    if (!agree.checked) {
      errors.push('ูุฌุจ ุงูููุงููุฉ ุนูู ุงูุดุฑูุท ูุงูุฃุญูุงู');
    }
    
    return errors;
  }
  
  // Submit button handler
  submitBtn.addEventListener('click', async () => {
    try {
      // Validate form
      const errors = validateForm();
      if (errors.length > 0) {
        errors.forEach(error => displayMessage('error', `โ๏ธ ${error}`));
        return;
      }
      
      // Disable submit button
      if (submitBtn.disabled) return;
      submitBtn.disabled = true;
      submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ุฌุงุฑู ุงูุฅุฑุณุงู...';
      submitStatus.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ุฌุงุฑู ูุนุงูุฌุฉ ุงูุจูุงูุงุช...';
      
      // Generate reference code
      const ref = genRef();
      let imageBase64 = '';
      
      // Process image if selected
      if (selectedFile) {
        submitStatus.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ุฌุงุฑู ุถุบุท ุงูุตูุฑุฉ...';
        
        try {
          const compressionResult = await compressImage(selectedFile);
          
          if (compressionResult) {
            imageBase64 = compressionResult.base64;
            console.log(`Image compressed: ${compressionResult.reduction}% reduction`);
          } else {
            imageBase64 = await fileToBase64(selectedFile);
          }
        } catch (error) {
          console.error('Image compression error:', error);
          imageBase64 = await fileToBase64(selectedFile);
        }
      }
      
      // Prepare payload
      const payload = {
        action: 'submitAd',
        ref_code: ref,
        name: f_name.value.trim(),
        price: f_price.value.trim(),
        description: f_desc.value.trim(),
        location: f_loc.value.trim(),
        contact: f_contact.value.trim(),
        category: f_cat.value.trim(),
        imageBase64: imageBase64,
        client_timestamp: new Date().toISOString()
      };
      
      // Send to server
      submitStatus.innerHTML = '<i class="fas fa-spinner fa-spin"></i> ุฌุงุฑู ุงูุฅุฑุณุงู ุฅูู ุงูุณูุฑูุฑ...';
      
      const response = await fetch(APPS_SCRIPT_URL, {
        method: 'POST',
        headers: { 
          'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'
        },
        body: new URLSearchParams(payload).toString()
      });
      
      // Handle response
      let result;
      try {
        const text = await response.text();
        try {
          result = JSON.parse(text);
        } catch {
          // If response is not JSON, assume success
          result = { status: 'success', message: 'ุชู ุงูุฅุฑุณุงู ุจูุฌุงุญ' };
        }
      } catch (error) {
        result = { status: 'success', message: 'ุชู ุงูุฅุฑุณุงู ุจูุฌุงุญ' };
      }
      
      if (result.status === 'success') {
        // Show success section
        refCodeEl.textContent = ref;
        afterSubmit.style.display = 'block';
        
        // Prepare WhatsApp message
        const msg = `
๐ฃ *ุฅุดุนุงุฑ ุฅุนูุงู ูุนูู ุฌุฏูุฏ* ๐ฃ
โโโโโโโโโโโโโโโโโโโโ
ุชู ุชูุฏูู ุฅุนูุงู ุฌุฏูุฏ ูู ุฌุฏูู Google Sheets ูููุฑุงุฌุนุฉ.

๐ *ุงุณู ุงูุฅุนูุงู:* ${payload.name}
๐ฐ *ุงูุณุนุฑ:* ${payload.price}
๐ *ุงููููุน:* ${payload.location}
๐ *ุงูุงุชุตุงู:* ${payload.contact}
๐ท๏ธ *ุงููุณู:* ${payload.category}

๐ *ุงูุฑูุฒ ุงููุฑุฌุนู:* ${payload.ref_code}

*ุงูุฅุฌุฑุงุก ุงููุทููุจ:*
1. ูุฑุฌู ูุชุญ Google Sheet ูุงูุชุญูู ูู ูุฑูุฉ Pending_Ads
2. ูู ุจูุฑุงุฌุนุฉ ุงูุฅุนูุงู ููุจููู ุฃู ุฑูุถู

ุดูุฑุงู ูู!
โโโโโโโโโโโโโโโโโโโโ
        `.trim();
        
        openWa.href = `https://wa.me/${WHATSAPP_NUMBER}?text=` + encodeURIComponent(msg);
        openWa.target = '_blank';
        
        // Show success message
        submitStatus.innerHTML = '<i class="fas fa-check-circle" style="color: var(--secondary-color);"></i> ุชู ุงูุฅุฑุณุงู ุจูุฌุงุญ';
        displayMessage('success', 'โ ุชู ุฅุฑุณุงู ุฅุนูุงูู ุจูุฌุงุญ! ุณูุชู ูุฑุงุฌุนุชู ูู ูุจู ุงูุฅุฏุงุฑุฉ.');
        
        // Scroll to success section
        afterSubmit.scrollIntoView({ behavior: 'smooth' });
        
        // Clear form
        f_name.value = '';
        f_price.value = '';
        f_desc.value = '';
        f_loc.value = '';
        f_contact.value = '';
        f_cat.value = '';
        f_file.value = '';
        agree.checked = false;
        removeImage();
        nameCounter.textContent = '0';
        descCounter.textContent = '0';
        
      } else {
        throw new Error(result.message || 'ูุดู ูู ุฅุฑุณุงู ุงูุฅุนูุงู');
      }
      
    } catch (err) {
      console.error('Submit error:', err);
      submitStatus.innerHTML = '<i class="fas fa-exclamation-circle" style="color: var(--danger-color);"></i> ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุงูุฅุฑุณุงู';
      displayMessage('error', 'โ ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฅุฑุณุงู ุงูุฅุนูุงู. ูุฑุฌู ุงููุญุงููุฉ ูุฑุฉ ุฃุฎุฑู.');
    } finally {
      // Re-enable submit button
      submitBtn.disabled = false;
      submitBtn.innerHTML = '<i class="fas fa-paper-plane"></i> ุฅุฑุณุงู ุงูุฅุนูุงู ูููุฑุงุฌุนุฉ';
    }
  });
})();

// ==========================================================
// ๐๏ธ EVENT LISTENERS
// ==========================================================
if (qEl) {
  qEl.addEventListener('input', debounce(applyFiltersAndRender, 300));
}

if (catFilter) {
  catFilter.addEventListener('change', applyFiltersAndRender);
}

// Open ad from hash in URL
function openAdFromHash() {
  try {
    const hash = window.location.hash;
    if (!hash || !hash.startsWith('#ad-')) return;
    
    const ref = decodeURIComponent(hash.slice(4)).trim();
    if (!ref) return;
    
    const item = ads.find(a => (a.ref_code || '') === ref);
    if (!item) return;

    // Activate home tab
    document.querySelectorAll('main > section').forEach(s => s.classList.remove('active'));
    const home = document.getElementById('home');
    if (home) home.classList.add('active');
    
    if (listControls) listControls.style.display = 'flex';
    
    document.querySelectorAll('.nav-btn').forEach(btn => {
      if (btn.dataset.target === 'home') btn.setAttribute('aria-current', 'true');
      else btn.removeAttribute('aria-current');
    });

    openDetails(item);
  } catch (e) {
    console.warn('openAdFromHash error', e);
  }
}

// Show privacy policy
window.showPrivacy = function() {
  document.querySelectorAll('.nav-btn').forEach(btn => {
    if (btn.dataset.target === 'privacy') btn.click();
  });
};

// Go to submit section
window.goToSubmit = function() {
  document.querySelectorAll('.nav-btn').forEach(btn => {
    if (btn.dataset.target === 'send') btn.click();
  });
};

// ==========================================================
// ๐ INITIALIZATION
// ==========================================================
window.addEventListener('load', async () => {
  // Activate home section
  document.getElementById('home').classList.add('active');
  
  // Load ads
  await loadAdsFromGoogleSheet();
  
  // Open ad from hash if present
  openAdFromHash();
  
  // Check and toggle message visibility
  checkAndToggleVisibility();
  
  // Show ticker tape
  const tickerTape = document.getElementById('tickerTape');
  if (tickerTape) {
    tickerTape.classList.add('has-messages');
  }
});

// Listen for hash changes
window.addEventListener('hashchange', openAdFromHash);
</script>
</body>
</html>
