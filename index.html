<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ø§Ù„Ø¯Ù„Ø§Ù„Ø© | Ø³ÙˆÙ‚ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ø¨ÙŠØ¹ ÙˆØ§Ù„Ø´Ø±Ø§Ø¡ ÙÙŠ Ø§Ù„Ø³ÙˆØ¯Ø§Ù†</title>
<link rel="icon" type="image/png" href="/favicon.ico">

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXX"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  // ğŸ’¡ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø¨Ø£Ø±Ù‚Ø§Ù… Google Analytics Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ© Ø§Ù„Ø®Ø§ØµØ© Ø¨Ùƒ
  gtag('js', new Date());
  gtag('config', 'G-VFM8VZCQY6');
</script>

  <meta name="description" content="Ø§Ù„Ø¯Ù„Ø§Ù„Ø© â€” Ù…Ø¹Ø±Ø¶ ÙˆØ³ÙˆÙ‚ Ù…ØªÙ…ÙŠØ² Ù„Ù†Ø´Ø± ÙˆÙ…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ø¨ÙˆØ¨Ø© Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆÙŠØ³Ø± ÙÙŠ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† . Ø§Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ù…Ø´ØªØ±ÙŠÙ† ÙÙŠ Ù…Ù†Ø·Ù‚ØªÙƒ Ù…Ø¨Ø§Ø´Ø±Ø© , Ù…ØªØ¹Ø© ÙˆØ³Ù‡ÙˆÙ„Ø© ÙÙŠ Ø§Ù„Ø¹Ø±Ø¶ ÙˆØ§Ù„Ø·Ù„Ø¨ ,ÙÙ‚Ø· Ø¹Ø¨Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ ÙŠÙ…ÙƒÙ†Ùƒ ØªÙ‚Ø¯ÙŠÙ… Ø·Ù„Ø¨ Ø§Ø¹Ù„Ø§Ù† ÙˆØ§Ø°Ø§ ØªÙ…Øª Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø³ÙŠØ¹Ø±Ø¶ Ø§Ø¹Ù„Ø§Ù†Ùƒ Ø¹Ù„ÙŠ Ø§Ù„Ù…Ù„Ø§ÙŠÙŠÙ† Ù…Ù† Ø§Ù„Ø²ÙˆØ§Ø±." />
<link rel="canonical" href="https://eldelala.com/" />
<link rel="icon" type="image/png" href="/favicon.ico">

<meta property="og:type" content="website" />
<meta property="og:title" content="Ø§Ù„Ø¯Ù„Ø§Ù„Ø© â€” Ø§Ø¹Ù„Ù† Ø¨Ø¨Ø³Ø§Ø·Ø© ÙˆØ³Ù‡ÙˆÙ„Ø©" />
<meta property="og:description" content="Ø³ÙˆÙ‚ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù„Ù„Ø¨ÙŠØ¹ ÙˆØ§Ù„Ø´Ø±Ø§Ø¡ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø³ÙˆØ¯Ø§Ù† â€“ Ø§Ù„Ø¯Ù„Ø§Ù„Ø©" />
<meta property="og:url" content="https://eldelala.com/" />
<meta property="og:image" content="https://eldelala.com/og-image.png" />


<style>
/* ---------------------------------------------------------------------- */
/* GENERAL STYLES */
/* ---------------------------------------------------------------------- */
:root {
  --primary-color: #0b2545; /* Dark Blue */
  --secondary-color: #fca311; /* Yellow/Orange */
  --text-color: #333;
  --bg-color: #f4f7f6;
  --card-bg: #fff;
}
* {
  box-sizing: border-box;
}
body {
  font-family: 'Tajawal', sans-serif;
  direction: rtl;
  text-align: right;
  margin: 0;
  padding: 0;
  background-color: var(--bg-color);
  color: var(--text-color);
  line-height: 1.6;
}
.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 10px 20px;
}
h1, h2, h3 {
  color: var(--primary-color);
  font-weight: 700;
}
a {
  color: var(--primary-color);
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}

/* ---------------------------------------------------------------------- */
/* HEADER */
/* ---------------------------------------------------------------------- */
.header {
  background-color: var(--primary-color);
  color: white;
  padding: 15px 0;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}
.header-content {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.logo {
  font-size: 1.8rem;
  font-weight: 900;
  color: white;
}
.btn {
  padding: 10px 20px;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: 600;
  transition: background-color 0.2s;
  text-align: center;
  display: inline-block;
}
.btn-primary {
  background-color: var(--secondary-color);
  color: var(--primary-color);
}
.btn-primary:hover {
  background-color: #e69100;
}
.btn-secondary {
  background-color: #eee;
  color: var(--text-color);
}
.btn-secondary:hover {
  background-color: #ddd;
}
.btn-submit {
    background-color: #4CAF50;
    color: white;
}
.btn-submit:hover {
    background-color: #45a049;
}
.btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
}
.btn.alt {
  padding: 8px 15px;
  font-size: 0.9rem;
  font-weight: normal;
}

/* ---------------------------------------------------------------------- */
/* FILTERS AND SEARCH */
/* ---------------------------------------------------------------------- */
.filters-bar {
  display: flex;
  gap: 15px;
  margin: 20px 0;
  padding: 15px;
  background-color: var(--card-bg);
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}
.search-input, .category-select {
  padding: 10px;
  border: 1px solid #ddd;
  border-radius: 5px;
  font-size: 1rem;
  flex: 1;
}
.search-input {
  flex-grow: 2;
}

/* ---------------------------------------------------------------------- */
/* AD GRID */
/* ---------------------------------------------------------------------- */
#ad-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 25px;
  margin-top: 25px;
}
.ad-card {
  background-color: var(--card-bg);
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s;
  cursor: pointer;
}
.ad-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
}
.ad-card-img {
  width: 100%;
  height: 200px;
  object-fit: cover;
}
.ad-card-body {
  padding: 15px;
}
.ad-card-title {
  font-size: 1.3rem;
  margin-top: 0;
  margin-bottom: 5px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.ad-card-price {
  font-size: 1.1rem;
  font-weight: 700;
  color: var(--secondary-color);
  margin-bottom: 10px;
}
.ad-card-info {
  font-size: 0.9rem;
  color: #666;
  margin-bottom: 5px;
}
.ad-card-info strong {
  color: var(--primary-color);
}
.ad-card-footer {
  padding: 15px;
  border-top: 1px solid #eee;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.85rem;
  color: #999;
}
.no-ads-message {
    text-align: center;
    padding: 50px 20px;
    font-size: 1.5rem;
    color: #999;
}

/* ---------------------------------------------------------------------- */
/* SUBMISSION FORM */
/* ---------------------------------------------------------------------- */
#submission-form {
    background-color: var(--card-bg);
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    margin-top: 30px;
}
#submission-form h2 {
    text-align: center;
    margin-bottom: 25px;
}
.form-group {
    margin-bottom: 15px;
}
.form-group label {
    display: block;
    font-weight: 600;
    margin-bottom: 5px;
    color: var(--primary-color);
}
.form-group input, .form-group textarea, .form-group select {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 1rem;
    box-sizing: border-box;
}
.form-group textarea {
    resize: vertical;
}
.form-status {
    padding: 10px;
    border-radius: 5px;
    margin-top: 15px;
    text-align: center;
}
.form-status.success {
    background-color: #d4edda;
    color: #155724;
}
.form-status.error {
    background-color: #f8d7da;
    color: #721c24;
}

/* ---------------------------------------------------------------------- */
/* MODAL (Details) */
/* ---------------------------------------------------------------------- */
.modal {
  display: none; 
  position: fixed; 
  z-index: 1000; 
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  overflow-y: auto; 
  background-color: rgba(0,0,0,0.8); 
  padding: 20px;
}
.modal.open {
    display: block;
}
.modal-content {
  background-color: var(--card-bg);
  margin: 5vh auto; 
  padding: 20px;
  border-radius: 10px;
  width: 95%;
  max-width: 900px; 
  box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  position: relative;
}
.close-btn {
  color: #aaa;
  float: left;
  font-size: 36px;
  font-weight: bold;
  cursor: pointer;
  position: absolute;
  top: 10px;
  left: 20px;
  transition: color 0.2s;
}
.close-btn:hover,
.close-btn:focus {
  color: #333;
}
.modalMain {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
}
.modalImage {
    flex: 1 1 40%;
    min-width: 300px;
    height: auto;
    max-height: 400px;
    overflow: hidden;
    border-radius: 8px;
}
.modalImage img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}
.modalDetails {
    flex: 1 1 50%;
    padding: 10px 0;
}
.modalDetails .title {
    font-size: 2rem;
    margin-top: 0;
}
.refBox {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    font-size: 0.9rem;
    color: #999;
    border-bottom: 1px dashed #eee;
    padding-bottom: 10px;
}
.refBox .refCode {
    font-weight: bold;
    color: var(--primary-color);
}
.detailsList {
    margin-bottom: 20px;
    padding: 15px;
    border: 1px solid #f0f0f0;
    border-radius: 6px;
}
.detailsItem {
    padding: 5px 0;
    border-bottom: 1px dotted #eee;
}
.detailsItem:last-child {
    border-bottom: none;
}
.detailsItem strong {
    font-weight: 700;
    color: var(--primary-color);
    display: inline-block;
    width: 100px;
}
.fullDesc {
    font-size: 1.1rem;
    margin-bottom: 20px;
    padding: 10px 0;
}
.modalActions {
    display: flex;
    gap: 15px;
    justify-content: flex-start;
    padding-top: 15px;
    border-top: 1px solid #eee;
}
.modalFooter {
    text-align: left;
    margin-top: 15px;
    padding-top: 10px;
    border-top: 1px solid #eee;
    font-size: 0.8rem;
    color: #999;
}


/* Media Queries */
@media (max-width: 600px) {
  .header-content {
    flex-direction: column;
    gap: 10px;
  }
  .filters-bar {
    flex-direction: column;
  }
  .search-input, .category-select {
    width: 100%;
  }
  .modalMain {
    flex-direction: column;
  }
  .modalImage, .modalDetails {
    flex: 1 1 100%;
    min-width: unset;
  }
}
</style>

</head>
<body>

<header class="header">
  <div class="container header-content">
    <div class="logo">Ø§Ù„Ø¯Ù„Ø§Ù„Ø©</div>
    <div class="header-actions">
      <button class="btn btn-primary" onclick="scrollToForm()">Ø£Ø¶Ù Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ø§Ù„Ø¢Ù†</button>
    </div>
  </div>
</header>

<main class="container">
  
  <div class="filters-bar">
    <input type="text" id="query-input" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ø¥Ø¹Ù„Ø§Ù† (Ù…Ø«Ø§Ù„: Ø³ÙŠØ§Ø±Ø©ØŒ Ù…Ù†Ø²Ù„ Ù„Ù„Ø¥ÙŠØ¬Ø§Ø±)..." />
    <select id="category-select" class="category-select">
      <option value="">ÙƒÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option>
      </select>
  </div>
  
  <div id="ad-grid">
    </div>
  
  <div id="no-ads" class="no-ads-message" style="display:none;">
      Ù†Ø¹ØªØ°Ø±ØŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø£ÙŠ Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ØªØ·Ø§Ø¨Ù‚ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¨Ø­Ø«.
  </div>
  
  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <div class="modal-content">
      <div class="modalMain">
        <div class="modalImage">
          <img id="modalMainImg" src="" alt="ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†" />
        </div>
        <div class="modalDetails">
          <span class="close-btn" id="modalClose" onclick="closeModal()">&times;</span>
          <h3 class="title" id="modalTitle"></h3>
          
          <div class="refBox">
            <span>Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ: <span class="refCode" id="modalRefCode"></span></span>
            <button id="modalShareBtn" class="btn alt" style="background:#555; color:#fff;" onclick="shareAdDetails(this)" title="Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†</button>
          </div>
          
          <div class="detailsList" id="modalDetailsList">
            </div>
          
          <p class="fullDesc" id="modalDescription"></p>

          <div class="modalActions">
            <button id="modalCallBtn" class="btn alt" style="background:#0078d7;" title="Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ù…Ø¹Ù„Ù†">Ø§ØªØµØ§Ù„ ğŸ“</button>
            <button id="modalWhatsappBtn" class="btn alt" style="background:#25d366; color:#fff;" title="Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨">ÙˆØ§ØªØ³Ø§Ø¨ ğŸ’¬</button>
          </div>

        </div>
      </div>
      <div class="modalFooter">
        <span class="muted small">ØªØ§Ø±ÙŠØ® Ø§Ù„Ù†Ø´Ø±: <span id="modalDate"></span></span>
      </div>
    </div>
  </div>
  
  
  <div id="ad-submission-form">
    <div id="submission-form">
      <h2>Ø§Ù†Ø´Ø± Ø¥Ø¹Ù„Ø§Ù†Ùƒ Ù…Ø¬Ø§Ù†Ø§Ù‹</h2>
      <div id="form-message" class="form-status" style="display:none;"></div>
      <form id="ad-form">
        <div class="form-group">
          <label for="ad-name">Ø§Ø³Ù… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†/Ø§Ù„Ø¹Ù†ÙˆØ§Ù† (Ù…Ø·Ù„ÙˆØ¨):</label>
          <input type="text" id="ad-name" name="name" required />
        </div>
        <div class="form-group">
          <label for="ad-price">Ø§Ù„Ø³Ø¹Ø± (Ù…Ø·Ù„ÙˆØ¨):</label>
          <input type="text" id="ad-price" name="price" required />
        </div>
        <div class="form-group">
          <label for="ad-description">Ø§Ù„ÙˆØµÙ Ø§Ù„ØªÙØµÙŠÙ„ÙŠ (Ù…Ø·Ù„ÙˆØ¨):</label>
          <textarea id="ad-description" name="description" rows="4" required></textarea>
        </div>
        <div class="form-group">
          <label for="ad-location">Ø§Ù„Ù…ÙˆÙ‚Ø¹ (Ù…Ø«Ø§Ù„: Ø§Ù„Ø®Ø±Ø·ÙˆÙ…ØŒ Ø¨Ø­Ø±ÙŠ...):</label>
          <input type="text" id="ad-location" name="location" />
        </div>
        <div class="form-group">
          <label for="ad-contact">Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„ (ÙˆØ§ØªØ³Ø§Ø¨ - Ù…Ø·Ù„ÙˆØ¨):</label>
          <input type="tel" id="ad-contact" name="contact" placeholder="ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø±Ù‚Ù… ÙˆØ§ØªØ³Ø§Ø¨" required />
        </div>
        <div class="form-group">
          <label for="ad-category-sub">Ø§Ù„ØªØµÙ†ÙŠÙ:</label>
          <select id="ad-category-sub" name="category" required>
            <option value="">-- Ø§Ø®ØªØ± ØªØµÙ†ÙŠÙØ§Ù‹ --</option>
            <option value="Ø³ÙŠØ§Ø±Ø§Øª">Ø³ÙŠØ§Ø±Ø§Øª</option>
            <option value="Ø¹Ù‚Ø§Ø±Ø§Øª">Ø¹Ù‚Ø§Ø±Ø§Øª</option>
            <option value="Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª">Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Øª</option>
            <option value="Ø£Ø«Ø§Ø«">Ø£Ø«Ø§Ø«</option>
            <option value="Ø®Ø¯Ù…Ø§Øª">Ø®Ø¯Ù…Ø§Øª</option>
            <option value="Ø£Ø®Ø±Ù‰">Ø£Ø®Ø±Ù‰</option>
          </select>
        </div>
        <div class="form-group">
          <label for="ad-image">ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† (Ù…Ø·Ù„ÙˆØ¨):</label>
          <input type="file" id="ad-image" name="image" accept="image/*" required />
          <small>ÙŠÙØ¶Ù„ Ø£Ù† Ù„Ø§ ÙŠØªØ¬Ø§ÙˆØ² Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© 2 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª.</small>
        </div>
        
        <div id="submit-status" class="form-status" style="display:none;"></div>

        <div class="form-group" style="text-align: center;">
          <button type="submit" class="btn btn-submit" id="submit-btn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©</button>
        </div>
      </form>
      
      <div id="whatsapp-notify" style="text-align: center; margin-top: 20px; display:none;">
          <p>Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ! ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¹Ù„Ø§Ù†Ùƒ. Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©ØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø¯ÙŠØ±:</p>
          <a id="open-whatsapp" class="btn alt" style="background:#25d366; color:white; font-size: 1.1rem;" target="_blank">
              Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨ ğŸ’¬
          </a>
      </div>
    </div>
  </div>
</main>

<footer>
  <div class="container" style="text-align: center; padding: 15px 0; font-size: 0.9rem; color: #666;">
    &copy; 2024 Ø§Ù„Ø¯Ù„Ø§Ù„Ø©. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.
  </div>
</footer>

<script>
/* ---------------------------------------------------------------------- */
/* GLOBAL VARIABLES & SETUP */
/* ---------------------------------------------------------------------- */

/* ğŸ’¡ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨Ø±Ø§Ø¨Ø· Ø³ÙƒØ±ÙŠØ¨Øª Apps Script Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ø¨Ø¹Ø¯ Ø§Ù„Ù†Ø´Ø±/Ø§Ù„ØªØ­Ø¯ÙŠØ« */
const APPS_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbxrAZ2-SF-IQ9DqEj6sPM5AOdOcJ62UghmGWy2TuS_M0KA7Y0FPPeTJ3DMxdfGLuh0n/exec'; 
/* Ø±Ù‚Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø·Ù„Ø¨Ø§Øª Ø§Ù„Ù†Ø´Ø± */
const WHATSAPP_NUMBER = '249998615193'; 
/* ğŸ’¡ Ø§Ø³ØªØ¨Ø¯Ù„ Ù‡Ø°Ø§ Ø¨Ø±Ø§Ø¨Ø· Ù…ÙˆÙ‚Ø¹Ùƒ Ø§Ù„ÙØ¹Ù„ÙŠ (ÙŠØ³ØªØ®Ø¯Ù… Ù„Ù„Ù…Ø´Ø§Ø±ÙƒØ©) */
const BASE_URL = 'https://eldelala.com/'; 

let allAds = []; // Ù…Ø®Ø²Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
let filteredAds = []; // Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„ØªØµÙÙŠØ©
let categories = new Set(); // Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„ÙØ±ÙŠØ¯Ø©

// Ø§Ù„Ø¹Ù†Ø§ØµØ±
const adGrid = document.getElementById('ad-grid');
const noAdsMessage = document.getElementById('no-ads');
const formMessage = document.getElementById('form-message');
const adForm = document.getElementById('ad-form');
const submitBtn = document.getElementById('submit-btn');
const whatsappNotify = document.getElementById('whatsapp-notify');
const openWa = document.getElementById('open-whatsapp');
const submitStatus = document.getElementById('submit-status');
const categorySelectFilter = document.getElementById('category-select');
const queryInput = document.getElementById('query-input');

// Modal Elements
const modal = document.getElementById('modal');
const modalMainImg = document.getElementById('modalMainImg');
const modalTitle = document.getElementById('modalTitle');
const modalRefCode = document.getElementById('modalRefCode');
const modalDetailsList = document.getElementById('modalDetailsList');
const modalDescription = document.getElementById('modalDescription');
const modalDate = document.getElementById('modalDate');
const modalCallBtn = document.getElementById('modalCallBtn');
const modalWhatsappBtn = document.getElementById('modalWhatsappBtn');
const modalShareBtn = document.getElementById('modalShareBtn');


/* ---------------------------------------------------------------------- */
/* UTILITY FUNCTIONS */
/* ---------------------------------------------------------------------- */

/**
 * Ø¯Ø§Ù„Ø© Ù„ØªØ£Ø®ÙŠØ± Ø§Ù„ØªÙ†ÙÙŠØ° (Debouncing) Ù„Ù„Ø¨Ø­Ø«
 */
function debounce(func, delay) {
    let timeout;
    return function(...args) {
        const context = this;
        clearTimeout(timeout);
        timeout = setTimeout(() => func.apply(context, args), delay);
    };
}

/**
 * Ø¯Ø§Ù„Ø© Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„
 */
function displayMessage(type, message) {
    formMessage.className = `form-status ${type}`;
    formMessage.textContent = message;
    formMessage.style.display = 'block';
    setTimeout(() => {
        formMessage.style.display = 'none';
    }, 5000);
}

/**
 * Ø¯Ø§Ù„Ø© Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¥Ù„Ù‰ Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
 */
function scrollToForm() {
    document.getElementById('ad-submission-form').scrollIntoView({ behavior: 'smooth' });
}

/* ---------------------------------------------------------------------- */
/* DATA FETCHING & RENDERING */
/* ---------------------------------------------------------------------- */

/**
 * Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©
 */
async function fetchAds() {
    if (!APPS_SCRIPT_URL) {
        displayMessage('error', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† URL Ù„Ù€ Apps Script ÙÙŠ Ø§Ù„ÙƒÙˆØ¯.');
        return;
    }
    
    adGrid.innerHTML = '<div style="text-align:center; grid-column: 1 / -1;"><img src="https://i.gifer.com/Xqg9.gif" style="width: 50px;"> Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª...</div>';
    noAdsMessage.style.display = 'none';

    try {
        const response = await fetch(APPS_SCRIPT_URL, {
            method: 'POST',
            mode: 'no-cors', // ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† no-cors Ø£Ùˆ cors Ø­Ø³Ø¨ Ø¨ÙŠØ¦Ø© Ø§Ù„Ù†Ø´Ø±
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: new URLSearchParams({
                action: 'fetchPublished'
            })
        });

        const text = await response.text();
        const data = JSON.parse(text);

        if (data.status === 'success') {
            allAds = data.ads;
            // Ø¬Ù…Ø¹ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª
            allAds.forEach(ad => {
                if (ad.category) categories.add(ad.category);
            });
            populateCategoryFilter();
            applyFiltersAndRender();
        } else {
            displayMessage('error', data.message || 'ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª.');
            adGrid.innerHTML = '';
            noAdsMessage.textContent = data.message || 'ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª.';
            noAdsMessage.style.display = 'block';
        }
        
    } catch (error) {
        console.error('Fetch error:', error);
        displayMessage('error', 'ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª.');
        adGrid.innerHTML = '';
        noAdsMessage.textContent = 'ÙØ´Ù„ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø®Ø¯Ù…Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª.';
        noAdsMessage.style.display = 'block';
    }
}

/**
 * Ù…Ù„Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©
 */
function populateCategoryFilter() {
    categorySelectFilter.innerHTML = '<option value="">ÙƒÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª</option>';
    categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category;
        option.textContent = category;
        categorySelectFilter.appendChild(option);
    });
}

/**
 * ØªØ·Ø¨ÙŠÙ‚ ÙÙ„Ø§ØªØ± Ø§Ù„Ø¨Ø­Ø« ÙˆØ§Ù„ØªØµÙ†ÙŠÙ
 */
function applyFiltersAndRender() {
    const query = queryInput.value.toLowerCase().trim();
    const category = categorySelectFilter.value;

    filteredAds = allAds.filter(ad => {
        const matchesQuery = !query || 
                             (ad.name && ad.name.toLowerCase().includes(query)) ||
                             (ad.description && ad.description.toLowerCase().includes(query)) ||
                             (ad.location && ad.location.toLowerCase().includes(query));
        
        const matchesCategory = !category || ad.category === category;
        
        return matchesQuery && matchesCategory;
    });

    renderAds(filteredAds);
}

/**
 * Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©
 */
function renderAds(ads) {
    adGrid.innerHTML = '';
    if (ads.length === 0) {
        noAdsMessage.style.display = 'block';
        return;
    }
    noAdsMessage.style.display = 'none';

    ads.forEach(ad => {
        const card = document.createElement('div');
        card.className = 'ad-card';
        card.setAttribute('data-ref', ad.ref_code);
        card.onclick = () => openDetails(ad); 

        // ÙŠØ¬Ø¨ Ø£Ù† Ù†Ø³ØªØ®Ø¯Ù… ImageBase64 Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„ØªÙŠ ØªÙˆÙ„Ø¯Ù‡Ø§ ØµÙŠØºØ© IMAGE() Ù„Ø£Ù†Ù‡Ø§ Ù„Ø§ ØªØ¹Ù…Ù„ Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´ÙŠØª
        const imgSrc = ad.imageBase64 ? ad.imageBase64 : 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" style="background:#f3f4f6;color:#ccc;"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="20">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø©</text></svg>';

        card.innerHTML = `
            <img src="${imgSrc}" class="ad-card-img" alt="${ad.name || 'Ø¥Ø¹Ù„Ø§Ù†'}">
            <div class="ad-card-body">
                <h3 class="ad-card-title" title="${ad.name || 'Ø¥Ø¹Ù„Ø§Ù†'}">${ad.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}</h3>
                <div class="ad-card-price">${ad.price || 'Ø§Ù„ØªÙØ§ÙˆØ¶'}</div>
                <div class="ad-card-info"><strong>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong> ${ad.location || '-'}</div>
                <div class="ad-card-info"><strong>Ø§Ù„ØªØµÙ†ÙŠÙ:</strong> ${ad.category || '-'}</div>
            </div>
            <div class="ad-card-footer">
                <span>Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ: ${ad.ref_code || '-'}</span>
            </div>
        `;
        adGrid.appendChild(card);
    });

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠØ© Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª
    if (window.location.hash.startsWith('#ad-')) {
        const refCode = window.location.hash.substring(4);
        const ad = ads.find(a => a.ref_code === refCode);
        if (ad) openDetails(ad);
    }
}

/* ---------------------------------------------------------------------- */
/* MODAL DETAILS */
/* ---------------------------------------------------------------------- */

/**
 * ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙˆØ¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†
 */
function openDetails(ad) {
    if (!ad) return;

    modalTitle.textContent = ad.name || 'Ø¥Ø¹Ù„Ø§Ù†';
    modalRefCode.textContent = ad.ref_code || '-';
    modalDescription.textContent = ad.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ.';

    const imgSrc = ad.imageBase64 ? ad.imageBase64 : 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="200" style="background:#f3f4f6;color:#ccc;"><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="20">Ù„Ø§ ØªÙˆØ¬Ø¯ ØµÙˆØ±Ø©</text></svg>';
    modalMainImg.src = imgSrc;
    modalMainImg.alt = ad.name || 'ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†';
    
    const dateValue = ad.submission_date;
    let dateString = '-';
    try {
        dateString = dateValue ? new Date(dateValue).toLocaleDateString('ar-EG', { year: 'numeric', month: 'short', day: 'numeric' }) : '-';
    } catch (e) { dateString = 'ØªØ§Ø±ÙŠØ® ØºÙŠØ± ØµØ§Ù„Ø­'; }
    modalDate.textContent = dateString;
    
    // Ø¨Ù†Ø§Ø¡ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ØªÙØ§ØµÙŠÙ„
    modalDetailsList.innerHTML = '';
    const detailsMap = {
      'Ø§Ù„Ø³Ø¹Ø±': ad.price || '-',
      'Ø§Ù„Ù…ÙˆÙ‚Ø¹': ad.location || '-',
      'Ø§Ù„ØªØµÙ†ÙŠÙ': ad.category || '-',
      'Ø±Ù‚Ù… Ø§Ù„ØªÙˆØ§ØµÙ„': ad.contact || '-'
    };
    
    for (const [label, value] of Object.entries(detailsMap)) {
      const item = document.createElement('div');
      item.className = 'detailsItem';
      item.innerHTML = `<strong>${label}:</strong> ${value}`;
      modalDetailsList.appendChild(item);
    }
    
    // ğŸ’¡ Ø¥Ø¹Ø¯Ø§Ø¯ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
    const contactNumber = String(ad.contact || '').replace(/\D/g, ''); // ØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø±Ù‚Ù…
    
    if (contactNumber.length >= 8) { 
        // Ø²Ø± Ø§Ù„Ø§ØªØµØ§Ù„
        modalCallBtn.href = `tel:+${contactNumber}`;
        modalCallBtn.onclick = () => { window.location.href = `tel:+${contactNumber}`; };
        modalCallBtn.style.display = 'inline-block';
        
        // Ø²Ø± Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
        const waMessage = encodeURIComponent(`Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ Ø£Ø³ØªÙØ³Ø± Ø¹Ù† Ø¥Ø¹Ù„Ø§Ù†ÙƒÙ…: ${ad.name || ''} - Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ: ${ad.ref_code || ''}. Ø´Ø§Ù‡Ø¯ØªÙ‡ Ø¹Ù„Ù‰ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¯Ù„Ø§Ù„Ø©: ${BASE_URL}#ad-${ad.ref_code}`);
        modalWhatsappBtn.href = `https://wa.me/${contactNumber}?text=${waMessage}`;
        modalWhatsappBtn.onclick = (e) => { e.preventDefault(); window.open(`https://wa.me/${contactNumber}?text=${waMessage}`, '_blank'); };
        modalWhatsappBtn.style.display = 'inline-block';
        
    } else {
        modalCallBtn.style.display = 'none';
        modalWhatsappBtn.style.display = 'none';
    }
    
    // Ø¥Ø¹Ø¯Ø§Ø¯ Ø²Ø± Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ©
    modalShareBtn.adData = ad; 
    modalShareBtn.style.display = 'inline-block';


    modal.classList.add('open');
    document.body.style.overflow = 'hidden';
    window.location.hash = '#ad-' + ad.ref_code;
}

/**
 * Ø¯Ø§Ù„Ø© Ø§Ù„Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©
 */
function shareAdDetails(btn) {
    const ad = btn.adData;
    if (!ad) return;

    const url = `${BASE_URL}#ad-${ad.ref_code}`;
    const shareData = {
        title: ad.name || 'Ø¥Ø¹Ù„Ø§Ù† Ù…Ù† Ø§Ù„Ø¯Ù„Ø§Ù„Ø©',
        text: `ğŸ“¢ Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯ Ø¹Ù„Ù‰ Ø§Ù„Ø¯Ù„Ø§Ù„Ø©: ${ad.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'} Ø¨Ø³Ø¹Ø± ${ad.price || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯'}.\n${ad.description ? ad.description.slice(0, 100) + '...' : ''}`,
        url: url,
    };

    if (navigator.share) {
        // Ø§Ø³ØªØ®Ø¯Ø§Ù… Web Share API 
        navigator.share(shareData)
            .catch(error => {
                if(error.name !== 'AbortError') console.error('Error sharing:', error);
            });
    } else {
        // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ø§Ø¨Ø· Ù…Ø´Ø§Ø±ÙƒØ© Ø¨Ø¯ÙŠÙ„ Ù„Ù„ÙˆØ§ØªØ³Ø§Ø¨
        const fallbackText = `${shareData.title}\n${shareData.text}\n${shareData.url}`;
        const waLink = `https://wa.me/?text=${encodeURIComponent(fallbackText)}`;
        window.open(waLink, '_blank');
    }
}


function closeModal() {
    modal.classList.remove('open');
    document.body.style.overflow = 'auto';
    history.pushState('', document.title, window.location.pathname + window.location.search); // Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù‡Ø§Ø´
}

// Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ù…ÙØªØ§Ø­ Esc
document.addEventListener('keydown', function(event) {
    if (event.key === "Escape" && modal.classList.contains('open')) {
        closeModal();
    }
});


/* ---------------------------------------------------------------------- */
/* FORM SUBMISSION */
/* ---------------------------------------------------------------------- */

adForm.addEventListener('submit', async function(e) {
    e.preventDefault();
    
    if (!APPS_SCRIPT_URL) {
        displayMessage('error', 'ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¹Ù†ÙˆØ§Ù† URL Ù„Ù€ Apps Script ÙÙŠ Ø§Ù„ÙƒÙˆØ¯.');
        return;
    }
    
    submitBtn.disabled = true;
    submitBtn.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„...';
    whatsappNotify.style.display = 'none';
    submitStatus.style.display = 'none';

    const fileInput = document.getElementById('ad-image');
    const imageFile = fileInput.files[0];
    
    if (!imageFile) {
        displayMessage('error', 'Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ù„Ù„Ø¥Ø¹Ù„Ø§Ù†.');
        submitBtn.disabled = false;
        submitBtn.textContent = 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©';
        return;
    }
    
    // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¬Ù… Ø§Ù„Ù…Ù„Ù (2MB = 2 * 1024 * 1024 Ø¨Ø§ÙŠØª)
    if (imageFile.size > 2097152) {
        displayMessage('error', 'Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹. Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 2 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª.');
        submitBtn.disabled = false;
        submitBtn.textContent = 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©';
        return;
    }

    const payload = {
        name: document.getElementById('ad-name').value,
        price: document.getElementById('ad-price').value,
        description: document.getElementById('ad-description').value,
        location: document.getElementById('ad-location').value,
        contact: document.getElementById('ad-contact').value,
        category: document.getElementById('ad-category-sub').value,
        action: 'submitAd',
        // Ø³ÙŠØªÙ… Ø¥Ø¶Ø§ÙØ© imageBase64 Ù„Ø§Ø­Ù‚Ø§Ù‹
    };
    
    try {
        const reader = new FileReader();
        reader.onloadend = async function() {
            // ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØµÙˆØ±Ø© Ù…Ø´ÙØ±Ø© Ø¨Ù€ Base64
            payload.imageBase64 = reader.result; 

            // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø±Ø¬Ø¹ ÙØ±ÙŠØ¯ Ù…Ø³Ø¨Ù‚Ø§Ù‹
            payload.ref_code = 'R' + Date.now().toString(36).slice(-6).toUpperCase();

            const response = await fetch(APPS_SCRIPT_URL, {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: new URLSearchParams(payload)
            });
            
            // Ø¨Ù…Ø§ Ø£Ù† Ø§Ù„ÙˆØ¶Ø¹ Ù‡Ùˆ no-corsØŒ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ù‚Ø±Ø§Ø¡Ø© Response body Ù…Ø¨Ø§Ø´Ø±Ø©
            // Ù†Ø¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø£Ù† Ø§Ù„Ø³ÙƒØ±ÙŠØ¨Øª ÙŠØ¹Ù…Ù„ Ø¨Ø¯ÙˆÙ† Ø®Ø·Ø£
            // ÙŠÙ…ÙƒÙ† ØªØ­Ø³ÙŠÙ† Ø°Ù„Ùƒ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… doGet Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† doPost Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù†Ø´Ø± ÙƒÙ€ Web App
            
            // Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ù†Ù…ÙˆØ°Ø¬
            adForm.reset(); 
            submitBtn.textContent = 'Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù† Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©';
            
            submitStatus.style.display = 'block';
            submitStatus.className = 'form-status success';
            submitStatus.textContent = 'ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­. ÙŠØ±Ø¬Ù‰ Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø¯ÙŠØ± Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.';
            
            // Ø¹Ø±Ø¶ Ù‚Ø³Ù… Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
            whatsappNotify.style.display = 'block';

            // ØªØ¬Ù‡ÙŠØ² Ø±Ø³Ø§Ù„Ø© WhatsApp
            const msg = `
ğŸ“£ *Ø¥Ø´Ø¹Ø§Ø± Ø¥Ø¹Ù„Ø§Ù† Ù…Ø¹Ù„Ù‚ Ø¬Ø¯ÙŠØ¯* ğŸ“£
-------------------------
ØªÙ… ØªÙ‚Ø¯ÙŠÙ… Ø¥Ø¹Ù„Ø§Ù† Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ø¬Ø¯ÙˆÙ„ Google Sheets Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.

- ğŸ“ Ø§Ø³Ù… Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†: ${payload.name}
- ğŸ”– Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ù…Ø±Ø¬Ø¹ÙŠ: ${payload.ref_code}

*Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:*
1. ÙŠØ±Ø¬Ù‰ ÙØªØ­ Google Sheet ÙˆØ§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ÙˆØ±Ù‚Ø© Pending_Ads.
2. Ù‚Ù… Ø¨ØªØºÙŠÙŠØ± Ø§Ù„Ø­Ø§Ù„Ø© (Status) Ø¥Ù„Ù‰ ACCEPTED Ù„Ù†Ø´Ø±Ù‡ Ø£Ùˆ REJECTED Ù„Ø­Ø°ÙÙ‡.

Ø´ÙƒØ±Ø§Ù‹ Ù„Ùƒ!
`;
            
            // Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø±Ù‚Ù… Ø§Ù„Ù…Ø¯ÙŠØ± Ù„Ù„Ø¥Ø´Ø¹Ø§Ø±
            openWa.href = `https://wa.me/${WHATSAPP_NUMBER}?text=` + encodeURIComponent(msg);
            
            displayMessage('success', 'âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø¹Ù„Ø§Ù†Ùƒ! Ø³ÙŠØ¸Ù‡Ø± Ø§Ù„Ù€ WhatsApp Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ù„Ù„Ù…Ø¯ÙŠØ± Ù„Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©.');

        }
        reader.readAsDataURL(imageFile);


    } catch(err) {
        console.error(err);
        submitStatus.className = 'form-status error';
        submitStatus.textContent = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ (Ø±Ø§Ø¬Ø¹ Console).';
        submitStatus.style.display = 'block';
        displayMessage('error', 'Ø­Ø¯Ø« Ø®Ø·Ø£ ØºÙŠØ± Ù…ØªÙˆÙ‚Ø¹ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
    } finally {
        submitBtn.disabled = false;
    }
});


/* ---------------------------------------------------------------------- */
/* INITIALIZATION */
/* ---------------------------------------------------------------------- */

(function init() {
    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¥Ø¹Ù„Ø§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø¨Ø¯Ø¡ ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    fetchAds(); 
    
    // Ø±Ø¨Ø· ÙÙ„Ø§ØªØ± Ø§Ù„Ø¨Ø­Ø« Ø¨Ø¯Ø§Ù„Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù…Ø¤Ø®Ø±
    queryInput.addEventListener('input', debounce(applyFiltersAndRender, 300));
    categorySelectFilter.addEventListener('change', applyFiltersAndRender);
})();
</script>
</body>
</html>
